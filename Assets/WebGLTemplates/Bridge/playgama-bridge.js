(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},u="banner-container",c={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},p="in_game",d="native",h={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SHOW_LEADERBOARD_NATIVE_POPUP:"show_leaderboard_native_popup",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect"},y={message:"Before using the SDK you must initialize it"},m={message:"Storage not supported"},v={message:"Storage not available"},_={message:"GameDistribution Game ID is undefined"},g={message:"Y8 Game params are not found"},S={message:"OK Game params are not found"},b={message:"Lagged Game params are not found"},E={message:"Message is too long"};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:String(t)}function O(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function k(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,I(e,t,"set"),r),r}function D(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,I(e,t,"get"))}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var R=new WeakMap,T=new WeakMap,L=new WeakMap;const j=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,R,{writable:!0,value:void 0}),O(this,T,{writable:!0,value:void 0}),O(this,L,{writable:!0,value:void 0}),k(this,R,new Promise((function(e,r){k(t,T,e),k(t,L,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return D(this,R)}},{key:"resolve",value:function(e){D(this,T).call(this,e)}},{key:"reject",value:function(e){D(this,L).call(this,e)}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function B(e,t,r){return t&&C(e.prototype,t),r&&C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:String(t)}const G=B((function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=M(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t}));function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:String(t)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function V(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Y=new WeakMap;const Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(n);if(o){var r=W(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}(this,e)});function a(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=z(e=i.call.apply(i,[this].concat(s))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Y),r.set(t,n),e}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"sendMessage",value:function(e){if(e===f.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,V(this,Y,"get")))return Promise.reject();!function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,V(e,t,"set"),r)}(this,Y,!0)}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:String(t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}const $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(o){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&J(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);var ee=r(258),te=r.n(ee);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oe(n.key),n)}}function oe(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:String(t)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(o);if(i){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e))._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(G);te().mixin(se.prototype);const ue=se;function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function fe(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:String(t)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}const he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(n);if(o){var r=de(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&le(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ve(n.key),n)}}function ve(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:String(t)}function _e(e,t){Se(e,t),t.add(e)}function ge(e,t,r){Se(e,t),t.set(e,r)}function Se(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function be(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ee(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,we(e,t,"set"),r),r}function Pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,we(e,t,"get"))}function we(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ae="started",Oe=new WeakMap,ke=new WeakMap,De=new WeakMap,Ie=new WeakMap,Re=new WeakSet,Te=new WeakSet,Le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_e(this,Te),_e(this,Re),ge(this,Oe,{writable:!0,value:0}),ge(this,ke,{writable:!0,value:0}),ge(this,De,{writable:!0,value:"created"}),ge(this,Ie,{writable:!0,value:0}),Ee(this,Oe,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return Pe(this,De)}},{key:"start",value:function(){var e=this;Pe(this,De)!==Ae&&(Ee(this,ke,Pe(this,Oe)),be(this,Re,je).call(this,Ae),Ee(this,Ie,setInterval((function(){Ee(e,ke,Pe(e,ke)-1),e.emit("time_left_changed",Pe(e,ke)),Pe(e,ke)<=0&&(be(e,Te,Ne).call(e),be(e,Re,je).call(e,"completed"))}),1e3)))}},{key:"stop",value:function(){be(this,Te,Ne).call(this),Pe(this,De)===Ae&&be(this,Re,je).call(this,"stopped")}}])&&me(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function je(e){Ee(this,De,e),this.emit("state_changed",Pe(this,De))}function Ne(){clearInterval(Pe(this,Ie)),Ee(this,ke,0)}te().mixin(Le.prototype);const Ce=Le;function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function Ge(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Be(t)?t:String(t)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fe(e,t)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function xe(e,t){We(e,t),t.add(e)}function ze(e,t,r){We(e,t),t.set(e,r)}function We(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ve(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ke(e,t,"set"),r),r}function Ye(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ze(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ke(e,t,"get"))}function Ke(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Je=new WeakMap,qe=new WeakMap,Qe=new WeakMap,Xe=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakSet,rt=new WeakSet,nt=new WeakSet,ot=new WeakSet,it=new WeakSet,at=new WeakSet,st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(l,e);var t,r,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ue(o);if(u){var r=Ue(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return He(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),xe(He(t=c.call(this,e)),at),xe(He(t),it),xe(He(t),ot),xe(He(t),nt),xe(He(t),rt),xe(He(t),tt),ze(He(t),Je,{writable:!0,value:s.HIDDEN}),ze(He(t),qe,{writable:!0,value:i.CLOSED}),ze(He(t),Qe,{writable:!0,value:void 0}),ze(He(t),Xe,{writable:!0,value:60}),ze(He(t),$e,{writable:!0,value:a.CLOSED}),ze(He(t),et,{writable:!0,value:null}),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return Ye(He(t),nt,lt).call(He(t),e)})),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&Ye(He(t),tt,ut).call(He(t)),Ye(He(t),ot,ft).call(He(t),e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return Ye(He(t),it,pt).call(He(t),e)})),t}return t=l,r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return Ze(this,Je)}},{key:"interstitialState",get:function(){return Ze(this,qe)}},{key:"rewardedPlacement",get:function(){return Ze(this,et)}},{key:"rewardedState",get:function(){return Ze(this,$e)}},{key:"minimumDelayBetweenInterstitial",get:function(){return Ze(this,Xe)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){var t=Be(e),r=Ze(this,Xe);switch(t){case"number":r=e;break;case"string":if(r=parseInt(e,10),Number.isNaN(r))return;break;default:return}Ve(this,Xe,r),Ze(this,Qe)&&(Ze(this,Qe).stop(),Ye(this,tt,ut).call(this))}},{key:"showBanner",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN)if(Ye(this,nt,lt).call(this,s.LOADING),this.isBannerSupported){var n,o=r;o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback);var i=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.placements,a=Ye(this,at,dt).call(this,o,i);this._platformBridge.showBanner(t,a)}else Ye(this,nt,lt).call(this,s.FAILED)}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r&&"string"==typeof r||null!==(t=this._platformBridge.options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.placementFallback&&(r=this._platformBridge.options.advertisement.interstitial.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,o=Ye(this,at,dt).call(this,r,n);this._platformBridge.preloadInterstitial(o)}},{key:"showInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Ye(this,rt,ct).call(this))if(Ye(this,ot,ft).call(this,i.LOADING),this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&Ze(this,Qe)&&Ze(this,Qe).state===Ae)Ye(this,ot,ft).call(this,i.FAILED);else{var r,n=t;n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,a=Ye(this,at,dt).call(this,n,o);this._platformBridge.showInterstitial(a)}}},{key:"preloadRewarded",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r&&"string"==typeof r||null!==(t=this._platformBridge.options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.rewarded)&&void 0!==t&&t.placementFallback&&(r=this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=Ye(this,at,dt).call(this,r,n);this._platformBridge.preloadRewarded(o)}},{key:"showRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Ye(this,rt,ct).call(this)){var r;Ve(this,et,t),Ze(this,et)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&Ve(this,et,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=Ye(this,at,dt).call(this,Ze(this,et),n);Ye(this,it,pt).call(this,a.LOADING),this._platformBridge.showRewarded(o)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Me(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(G);function ut(){Ze(this,Xe)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(Ve(this,Qe,new Ce(Ze(this,Xe))),Ze(this,Qe).start())}function ct(){var e=[i.LOADING,i.OPENED].includes(Ze(this,qe)),t=[a.LOADING,a.OPENED,a.REWARDED].includes(Ze(this,$e));return e||t}function lt(e){Ze(this,Je)!==e&&(Ve(this,Je,e),this.emit(n.BANNER_STATE_CHANGED,Ze(this,Je)))}function ft(e){Ze(this,qe)!==e&&(Ve(this,qe,e),this.emit(n.INTERSTITIAL_STATE_CHANGED,Ze(this,qe)))}function pt(e){Ze(this,$e)!==e&&(Ve(this,$e,e),this.emit(n.REWARDED_STATE_CHANGED,Ze(this,$e)))}function dt(e,t){if(!e)return e;if(!t)return e;var r=t.find((function(t){return t.id===e}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:e}te().mixin(st.prototype);const ht=st;function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vt(n.key),n)}}function vt(e){var t=function(e,t){if("object"!=yt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yt(t)?t:String(t)}function _t(e,t){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_t(e,t)}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}const St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gt(n);if(o){var r=gt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pt(n.key),n)}}function Pt(e){var t=function(e,t){if("object"!=bt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:String(t)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}const Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=At(n);if(o){var r=At(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&Et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,It(n.key),n)}}function It(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:String(t)}function Rt(e,t){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rt(e,t)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function jt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Nt=new WeakSet;function Ct(e){var t;if(!e)return e;var r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return e;var n=r.find((function(t){return t.id===e}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:e}const Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lt(n);if(o){var r=Lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}(this,e)});function a(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=Tt(e=i.call.apply(i,[this].concat(o))),r=Nt),r.add(t),e}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(e,t){var r=jt(this,Nt,Ct).call(this,e);return this._platformBridge.leaderboardsSetScore(r,t)}},{key:"getEntries",value:function(e){var t=jt(this,Nt,Ct).call(this,e);return this._platformBridge.leaderboardsGetEntries(t)}}])&&Dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ft(n.key),n)}}function Ft(e){var t=function(e,t){if("object"!=Mt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mt(t)?t:String(t)}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}const xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ut(n);if(o){var r=Ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e){return this._platformBridge.paymentsPurchase(e)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}},{key:"consumePurchase",value:function(e){return this._platformBridge.paymentsConsumePurchase(e)}}])&&Gt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vt(n.key),n)}}function Vt(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:String(t)}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}function Zt(e){return Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zt(e)}const Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zt(n);if(o){var r=Zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&Wt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qt(n.key),n)}}function Qt(e){var t=function(e,t){if("object"!=Jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jt(t)?t:String(t)}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}const er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$t(n);if(o){var r=$t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nr(n.key),n)}}function nr(e){var t=function(e,t){if("object"!=tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tr(t)?t:String(t)}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}const ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(n);if(o){var r=ir(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&rr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(G);function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cr(e,t,r){var n;return n=function(e,t){if("object"!=sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==sr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lr=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function fr(e){var t=document.createElement("div");return t.id=u,t.style.position="absolute",document.body.appendChild(t),"top"===e?(t.style.top="0px",t.style.height="90px",t.style.width="100%"):(t.style.bottom="0px",t.style.height="90px",t.style.width="100%"),t}var pr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},dr=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},hr=function(e,t){return void 0===e[t]?null:e[t]};function yr(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=hr(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){console.error(e)}return e}),new Array(e.length)):hr(t,e)}function mr(e,t){for(var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){cr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];i in e&&t[i]instanceof Object&&e[i]instanceof Object?r[i]=mr(e[i],t[i]):r[i]=t[i]}return r}function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Er(n.key),n)}}function br(e,t,r){return(t=Er(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Er(e){var t=function(e,t){if("object"!=vr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vr(t)?t:String(t)}function Pr(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var wr=new WeakMap,Ar=function(){function t(e){var r,n,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),br(this,"_isInitialized",!1),br(this,"_platformSdk",null),br(this,"_isPlayerAuthorized",!1),br(this,"_playerId",null),br(this,"_playerName",null),br(this,"_playerPhotos",[]),br(this,"_visibilityState",null),br(this,"_localStorage",null),br(this,"_defaultStorageType",c.LOCAL_STORAGE),br(this,"_platformStorageCachedData",null),br(this,"_isBannerSupported",!1),br(this,"_paymentsPurchases",[]),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=wr),n.set(r,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState,document.addEventListener("visibilitychange",(function(){a._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){a._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){a._setVisibilityState(o.VISIBLE)})),e&&(this._options=gr({},e))}var r,u;return r=t,(u=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return"not_available"}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.unixtime)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case c.LOCAL_STORAGE:return null!==this._localStorage;case c.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case c.LOCAL_STORAGE:return null!==this._localStorage;case c.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(m)}return Promise.reject(m)}},{key:"setDataToStorage",value:function(e,t,r){if(r===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(m)}return Promise.reject(m)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(m)}return Promise.reject(m)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){if(this.isPaymentsSupported){var t={id:e};return this._paymentsPurchases.push(t),Promise.resolve(t)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(e){if(this.isPaymentsSupported){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));return t<0?Promise.reject():(this._paymentsPurchases.splice(t,1),Promise.resolve({id:e}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===vr(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){this._visibilityState!==e&&(this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState))}},{key:"_setBannerState",value:function(e){this.emit(n.BANNER_STATE_CHANGED,e)}},{key:"_setInterstitialState",value:function(e){this.emit(n.INTERSTITIAL_STATE_CHANGED,e)}},{key:"_setRewardedState",value:function(e){this.emit(n.REWARDED_STATE_CHANGED,e)}},{key:"_createPromiseDecorator",value:function(e){var t=new j;return Pr(this,wr)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return Pr(this,wr)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){Pr(this,wr)[e]&&(Pr(this,wr)[e].resolve(t),delete Pr(this,wr)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){Pr(this,wr)[e]&&(Pr(this,wr)[e].reject(t),delete Pr(this,wr)[e])}},{key:"_paymentsGetProductsPlatformData",value:function(){var e=this;return this._options.payments?this._options.payments.map((function(t){return gr({id:t.id},t[e.platformId])})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?gr({id:r.id},r[this.platformId]):null}},{key:"_paymentsGenerateTransactionId",value:function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(e){var t,r=this;return(null===(t=this._options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.useBuiltInErrorPopup)?function(e){if(!document.getElementById("bridge-info-popup-styles")){var t=document.createElement("style");t.id="bridge-info-popup-styles",t.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(t)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(e){o.onclick=function(){n.style.display="none",r.style.display="none",e()},r.style.display="block",n.style.display="flex"}))}().then((function(){e?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(e?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}}])&&Sr(r.prototype,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();te().mixin(Ar.prototype);const Or=Ar;function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ir(n.key),n)}}function Ir(e){var t=function(e,t){if("object"!=kr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kr(t)?t:String(t)}function Rr(){return Rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Rr.apply(this,arguments)}function Tr(e,t){return Tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tr(e,t)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(e){return jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jr(e)}function Nr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Br(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Mr(e,t,"get"))}function Mr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Gr=new WeakMap,Fr=new WeakSet;function Hr(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const Ur=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tr(e,t)}(p,t);var r,n,o,u,f=(o=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jr(o);if(u){var r=jr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lr(e)}(this,e)});function p(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Nr(t=Lr(e=f.call.apply(f,[this].concat(o))),r=Fr),r.add(t),function(e,t,r){Nr(e,t),t.set(e,{writable:!0,value:void 0})}(Lr(e),Gr),e}return r=p,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Rr(jr(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):Rr(jr(p.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){switch(Br(this,Gr)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return Rr(jr(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Br(this,Gr)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(h.INITIALIZE);if(!o){o=this._createPromiseDecorator(h.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=Gr,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,Mr(t,r,"set"),n)),lr("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){pr("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._isBannerSupported=!0,e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=c.PLATFORM_INTERNAL,e._resolvePromiseDecorator(h.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Rr(jr(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Rr(jr(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):Rr(jr(p.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===c.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Rr(jr(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===c.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return Rr(jr(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:e}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return Cr(this,Fr,Hr).call(this,h.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():Cr(this,Fr,Hr).call(this,h.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),Cr(this,Fr,Hr).call(this,h.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?Cr(this,Fr,Hr).call(this,h.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return Cr(this,Fr,Hr).call(this,h.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(e){return Cr(this,Fr,Hr).call(this,h.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&Dr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Or);function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Yr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yr(n.key),n)}}function Yr(e){var t=function(e,t){if("object"!=xr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xr(t)?t:String(t)}function Zr(){return Zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Zr.apply(this,arguments)}function Kr(e,t){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kr(e,t)}function Jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qr(e){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qr(e)}function Qr(e,t,r){Xr(e,t),t.set(e,r)}function Xr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $r(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function en(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,rn(e,t,"set"),r),r}function tn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,rn(e,t,"get"))}function rn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var nn=new WeakMap,on=new WeakMap,an=new WeakMap,sn=new WeakMap,un=new WeakSet;function cn(e){var t=this;return new Promise((function(r){var n={scopes:!1};e&&"boolean"==typeof e.scopes&&(n.scopes=e.scopes),t._platformSdk.getPlayer(n).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode(),t._defaultStorageType=t._isPlayerAuthorized?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE;var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var n=e.getPhoto("small"),o=e.getPhoto("medium"),i=e.getPhoto("large");return n&&t._playerPhotos.push(n),o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),en(t,on,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){r()}))}))}const ln=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t)}(y,t);var r,n,o,u,d=(o=y,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qr(o);if(u){var r=qr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Xr(t=Jr(e=d.call.apply(d,[this].concat(o))),r=un),r.add(t),Qr(Jr(e),nn,{writable:!0,value:!1}),Qr(Jr(e),on,{writable:!0,value:null}),Qr(Jr(e),an,{writable:!0,value:null}),Qr(Jr(e),sn,{writable:!0,value:null}),e}return r=y,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():Zr(qr(y.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():Zr(qr(y.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return Zr(qr(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return tn(this,nn)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return p}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("/sdk.js").then((function(){pr("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t,en(e,sn,$r(e,un,cn).call(e));var n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.23.0"}),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){en(e,nn,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),u=e._platformSdk.getPayments().then((function(t){en(e,an,t)}));e._isBannerSupported=!0;var c=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,a,u,c]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case f.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case f.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return Zr(qr(y.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(Wr(Wr({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(h.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(en(this,sn,$r(this,un,cn).call(this,e)),tn(this,sn).then((function(){t._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){en(t,sn,$r(t,un,cn).call(t,e)),tn(t,sn).then((function(){t._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Zr(qr(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Zr(qr(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?tn(this,sn).then((function(){return new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}))})):Promise.reject():Zr(qr(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?tn(this,sn).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Wr({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;tn(n,on).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}))})):Promise.reject():Zr(qr(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?tn(this,sn).then((function(){return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Wr({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];tn(r,on).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}))})):Promise.reject():Zr(qr(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(h.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(h.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(h.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(h.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(h.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(h.RATE);return t||(t=this._createPromiseDecorator(h.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(h.RATE):e._rejectPromiseDecorator(h.RATE)})).catch((function(t){e._rejectPromiseDecorator(h.RATE,t)})):e._rejectPromiseDecorator(h.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(h.RATE,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(h.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(h.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(e,t).then((function(){r._resolvePromiseDecorator(h.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(h.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(e,n).then((function(e){var r;r=e&&e.entries.length>0?e.entries.map((function(e){return{id:e.player.uniqueID,name:e.player.publicName,score:e.score,rank:e.rank,photo:e.player.getAvatarSrc("large")}})):[],t._resolvePromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!tn(this,an))return Promise.reject();var r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(h.PURCHASE);return n||(n=this._createPromiseDecorator(h.PURCHASE),tn(this,an).purchase(r).then((function(r){var n=Wr({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(h.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(h.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!tn(this,an))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(h.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(h.CONSUME_PURCHASE),tn(this,an).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(h.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(h.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!tn(this,an))return Promise.reject();var t=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(h.GET_CATALOG);return r||(r=this._createPromiseDecorator(h.GET_CATALOG),tn(this,an).getCatalog().then((function(r){var n=t.map((function(e){var t,n=r.find((function(t){return t.id===e.id}));return{id:e.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(t=n.getPriceCurrencyImage)||void 0===t?void 0:t.call(n,"medium")}}));e._resolvePromiseDecorator(h.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(h.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!tn(this,an))return Promise.reject();var t=this._getPromiseDecorator(h.GET_PURCHASES);return t||(t=this._createPromiseDecorator(h.GET_PURCHASES),tn(this,an).getPurchases().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=Wr({id:r.find((function(t){return t.id===e.productID})).id},e.purchaseData);return delete t.productID,t})),e._resolvePromiseDecorator(h.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(h.GET_PURCHASES,t)}))),t.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(h.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(h.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(h.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(h.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(h.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(h.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(h.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(h.CLIPBOARD_WRITE,e)}))),r.promise}}])&&Vr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(Or);function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dn(n.key),n)}}function dn(e){var t=function(e,t){if("object"!=fn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fn(t)?t:String(t)}function hn(){return hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},hn.apply(this,arguments)}function yn(e,t){return yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yn(e,t)}function mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function _n(e,t,r){gn(e,t),t.set(e,r)}function gn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function bn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Pn(e,t,"set"),r),r}function En(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Pn(e,t,"get"))}function Pn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var wn=new WeakMap,An=new WeakMap,On=new WeakMap,kn=new WeakSet;function Dn(){var e=this;return En(this,An)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){n?(e._isPlayerAuthorized=!0,e._defaultStorageType=c.PLATFORM_INTERNAL,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),t()):r()})).catch((function(e){r(e)}))})):Promise.reject()}const In=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yn(e,t)}(y,t);var r,n,o,p,d=(o=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vn(o);if(p){var r=vn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mn(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return gn(t=mn(e=d.call.apply(d,[this].concat(o))),r=kn),r.add(t),_n(mn(e),wn,{writable:!0,value:!1}),_n(mn(e),An,{writable:!0,value:!1}),_n(mn(e),On,{writable:!0,value:{adStarted:function(){En(mn(e),wn)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){En(mn(e),wn)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){En(mn(e),wn)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=y,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return En(this,An)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():hn(vn(y.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return En(this,An)}},{key:"deviceType",get:function(){if(En(this,An)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(e))return e}return hn(vn(y.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){pr("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=c.LOCAL_STORAGE,e._isBannerSupported=!0,e._platformSdk.init().then((function(){bn(e,An,e._platformSdk.user.isUserAccountAvailable);var t=Sn(e,kn,Dn).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!En(this,An))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(h.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Sn(e,kn,Dn).call(e).then((function(){e._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case f.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case f.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return hn(vn(y.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||hn(vn(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:hn(vn(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):hn(vn(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):hn(vn(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):hn(vn(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=fr(e)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([u]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){bn(this,wn,!1),this._platformSdk.ad.requestAd("midgame",En(this,On))}},{key:"showRewarded",value:function(){bn(this,wn,!0),this._platformSdk.ad.requestAd("rewarded",En(this,On))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}}])&&pn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(Or);function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Nn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nn(n.key),n)}}function Nn(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rn(t)?t:String(t)}function Cn(){return Cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Cn.apply(this,arguments)}function Bn(e,t){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bn(e,t)}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var Fn=new WeakSet;function Hn(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const Un=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bn(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gn(o);if(s){var r=Gn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mn(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=Mn(e=u.call.apply(u,[this].concat(o))),r=Fn),r.add(t),e}return r=l,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Fn,Hn).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE,e._resolvePromiseDecorator(h.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(h.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(h.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Cn(Gn(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Cn(Gn(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):Cn(Gn(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Ln({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):Cn(Gn(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Ln({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):Cn(Gn(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&jn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wn(n.key),n)}}function Wn(e){var t=function(e,t){if("object"!=xn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xn(t)?t:String(t)}function Vn(e,t){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vn(e,t)}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}function Kn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,qn(e,t,"set"),r),r}function Jn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qn(e,t,"get"))}function qn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Qn=new WeakMap;const Xn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vn(e,t)}(p,t);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zn(o);if(l){var r=Zn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yn(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=Yn(e=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Qn),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(h.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(h.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(h.INITIALIZE);break;case"SDK_GAME_START":Jn(t,Qn)?(t._setRewardedState(a.CLOSED),t._platformSdk.preloadAd("rewarded")):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Jn(t,Qn)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=c.LOCAL_STORAGE,this._isBannerSupported=!0,lr("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(h.INITIALIZE,_);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=fr(e)),r.style.display="block",this._platformSdk.showAd("display",{containerId:u}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;Kn(this,Qn,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var e=this;Kn(this,Qn,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&zn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Or);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,co(n.key),n)}}function to(){return to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},to.apply(this,arguments)}function ro(e,t){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ro(e,t)}function no(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e){return oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oo(e)}function io(e,t){so(e,t),t.add(e)}function ao(e,t,r){so(e,t),t.set(e,r)}function so(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uo(e,t,r){return(t=co(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(e){var t=function(e,t){if("object"!=$n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$n(t)?t:String(t)}function lo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function fo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,po(e,t,"get"))}function po(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ho="AUTHORIZED",yo={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},mo=new WeakMap,vo=new WeakMap,_o=new WeakMap,go=new WeakMap,So=new WeakSet,bo=new WeakSet,Eo=new WeakSet,Po=new WeakSet,wo=new WeakSet,Ao=new WeakSet,Oo=new WeakSet,ko=new WeakSet,Do=new WeakSet,Io=new WeakSet,Ro=new WeakSet,To=new WeakSet,Lo=new WeakSet,jo=new WeakSet,No=new WeakSet,Co=new WeakSet;function Bo(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function Mo(){var e=this;return{userProfileCallback:function(t,r,n){return lo(e,So,Fo).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return lo(e,Eo,Uo).call(e,r,n)}}}function Go(){var e=this;return{showPermissions:function(){return lo(e,Po,xo).call(e)},loadAd:function(t){return lo(e,wo,zo).call(e,t)},showLoadedAd:function(t,r){return lo(e,Ao,Wo).call(e,r)},showAd:function(t,r){return lo(e,Oo,Vo).call(e,r)},requestBannerAds:function(t,r){return lo(e,ko,Yo).call(e,t,r)},showBannerAds:function(t,r){return lo(e,Io,Ko).call(e,r)},hideBannerAds:function(t,r){return lo(e,Do,Zo).call(e,r)},setBannerFormat:function(t){return lo(e,Ro,Jo).call(e,t)},showInvite:function(t){return lo(e,To,qo).call(e,t)},showRatingDialog:function(t,r){return lo(e,Lo,Qo).call(e,t,r)},joinGroup:function(t,r){return lo(e,jo,Xo).call(e,t,r)},showLoginSuggestion:function(t,r){return lo(e,bo,Ho).call(e,t,r)},postMediatopic:function(t,r){return lo(e,No,$o).call(e,t,r)},isAdBlockEnabled:function(t,r){return lo(e,Co,ei).call(e,t,r)}}}function Fo(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(fo(this,vo).hasAppPermission(yo.VALUABLE_ACCESS),fo(this,_o).hasValueAccessCallback)}function Ho(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)}function Uo(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(h.INITIALIZE);else{var t=Object.values(yo).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function xo(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(fo(this,vo).hasAppPermission(yo.VALUABLE_ACCESS),fo(this,_o).hasValueAccessCallback)}function zo(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Wo(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Vo(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Yo(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",fo(this,mo));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Zo(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Ko(e){e||this._setBannerState(s.FAILED)}function Jo(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function qo(e){"error"===e?this._rejectPromiseDecorator(h.INVITE_FRIENDS):this._resolvePromiseDecorator(h.INVITE_FRIENDS)}function Qo(e,t){"error"===e?this._rejectPromiseDecorator(h.RATE,t):this._resolvePromiseDecorator(h.RATE)}function Xo(e,t){"error"===e?this._rejectPromiseDecorator(h.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(h.JOIN_COMMUNITY)}function $o(e,t){"error"===e?this._rejectPromiseDecorator(h.CREATE_POST,t):this._resolvePromiseDecorator(h.CREATE_POST)}function ei(e,t){"ok"===e?this._resolvePromiseDecorator(h.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(h.ADBLOCK_DETECT)}const ti=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ro(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oo(o);if(s){var r=oo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return no(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return io(no(e=u.call.apply(u,[this].concat(r))),Co),io(no(e),No),io(no(e),jo),io(no(e),Lo),io(no(e),To),io(no(e),Ro),io(no(e),Io),io(no(e),Do),io(no(e),ko),io(no(e),Oo),io(no(e),Ao),io(no(e),wo),io(no(e),Po),io(no(e),Eo),io(no(e),bo),io(no(e),So),ao(no(e),go,{get:Go,set:void 0}),ao(no(e),_o,{get:Mo,set:void 0}),ao(no(e),vo,{get:Bo,set:void 0}),uo(no(e),"_hasValuableAccessPermission",!1),uo(no(e),"_hasValuableAccessPermissionShowed",!1),uo(no(e),"_platformBannerOptions",{}),ao(no(e),mo,{writable:!0,value:null}),e}return r=l,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("//api.ok.ru/js/fapi5.js").then((function(){pr("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return fo(e,go)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===ho,e._isPlayerAuthorized?e._platformSdk.Client.call(fo(e,vo).userProfile,fo(e,_o).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE))}),(function(){e._rejectPromiseDecorator(h.INITIALIZE)})):e._rejectPromiseDecorator(h.INITIALIZE,S)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(h.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(ho)),e.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||to(oo(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._hasValuableAccessPermission:to(oo(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var u=a.data||{};if(Array.isArray(e)){var c=[];return i.forEach((function(e){if(""!==u[e]&&void 0!==u[e]){var t=u[e];if(r)try{t=JSON.parse(u[e])}catch(e){}c.push(t)}else c.push(null)})),void t(c)}if(""===u[e]||void 0===u[e])return void t(null);var l=u[e];if(r)try{l=JSON.parse(u[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(v):to(oo(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===c.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(v);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[u],t=i[u];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},u=0;u<o.length;u++)s();return Promise.all(a)}return to(oo(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===c.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(v);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return to(oo(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,po(t,mo,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(h.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(h.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(h.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(h.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(h.INVITE_FRIENDS,E):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(h.RATE);return e||(e=this._createPromiseDecorator(h.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(h.CREATE_POST);return r||(r=this._createPromiseDecorator(h.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(h.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(h.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&eo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function ni(){ni=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new R(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(T([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ri(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ri(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function oi(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=ui(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function si(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ui(n.key),n)}}function ui(e){var t=function(e,t){if("object"!=ri(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ri(t)?t:String(t)}function ci(){return ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ci.apply(this,arguments)}function li(e,t){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},li(e,t)}function fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pi(e)}function di(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function hi(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var yi=new WeakSet,mi=new WeakSet;function vi(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return e._playerId=t.id,e._isPlayerAuthorized=t.isAuthorized,e._playerName=t.name,e._playerPhotos=t.photos,e._defaultStorageType=e._isPlayerAuthorized?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE,e._isPlayerAuthorized?hi(e,mi,_i).call(e,[]):Promise.resolve()})).finally((function(){t()}))}))}function _i(e){return gi.apply(this,arguments)}function gi(){var e;return e=ni().mark((function e(t){var r,n=arguments;return ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",yr(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),gi=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){oi(i,n,o,a,s,"next",e)}function s(e){oi(i,n,o,a,s,"throw",e)}a(void 0)}))},gi.apply(this,arguments)}const Si=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&li(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pi(o);if(s){var r=pi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return di(fi(e=u.call.apply(u,[this].concat(r))),mi),di(fi(e),yi),e}return r=l,(n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://developer.playgama.com/sdk/v1.js").then((function(){pr("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,hi(e,yi,vi).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||ci(pi(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:ci(pi(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?hi(this,mi,_i).call(this,e,r):Promise.reject():ci(pi(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case c.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?ai({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case c.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),ci(pi(l.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(m)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case c.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?ai({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case c.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),ci(pi(l.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(m)}}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(h.AUTHORIZE_PLAYER),this._isPlayerAuthorized?hi(this,yi,vi).call(this,e).then((function(){t._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){hi(t,yi,vi).call(t,e).then((function(){t._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();r.externalId||(r.externalId=this._paymentsGenerateTransactionId(e));var n=this._getPromiseDecorator(h.PURCHASE);return n||(n=this._createPromiseDecorator(h.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(r).then((function(r){if("PAID"===r.status){var n=ai({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(h.PURCHASE,n)}else t._rejectPromiseDecorator(h.PURCHASE,r.error)})).catch((function(e){t._rejectPromiseDecorator(h.PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Golden Fennec"),priceCurrencyCode:"Golden Fennec",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));return Promise.resolve(t)}}])&&si(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ii(n.key),n)}}function wi(){return wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ki(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},wi.apply(this,arguments)}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(e){return ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ki(e)}function Di(e,t,r){return(t=Ii(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ii(e){var t=function(e,t){if("object"!=bi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bi(t)?t:String(t)}function Ri(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ti(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ji(e,t,"set"),r),r}function Li(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ji(e,t,"get"))}function ji(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ni=new WeakMap,Ci=new WeakMap;const Bi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ki(o);if(s){var r=ki(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ri(Oi(e=u.call.apply(u,[this].concat(r))),Ni,{writable:!0,value:void 0}),Ri(Oi(e),Ci,{writable:!0,value:void 0}),Di(Oi(e),"_defaultStorageType",c.PLATFORM_INTERNAL),Di(Oi(e),"_isPlayerAuthorized",!0),e}return r=l,n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return Li(this,Ni)?Li(this,Ni):wi(ki(l.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,Ti(e,Ni,i.locale),Ti(e,Ci,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case f.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return wi(ki(l.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||wi(ki(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||wi(ki(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===c.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):wi(ki(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===c.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):wi(ki(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===c.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):wi(ki(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){window.parent.postMessage({playdeck:{method:"customShare",value:Li(this,Ci)}},"*")}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();r.externalId||(r.externalId=this._paymentsGenerateTransactionId(e));var n=this._getPromiseDecorator(h.PURCHASE);return n||(n=this._createPromiseDecorator(h.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function r(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",r);var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(r),!0).forEach((function(t){Di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},i.value);t._paymentsPurchases.push(a),t._resolvePromiseDecorator(h.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",r),t._rejectPromiseDecorator(h.PURCHASE,i.value))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:r}},"*")),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Stars"),priceCurrencyCode:"Stars",priceValue:e.amount}}));return Promise.resolve(t)}}],n&&Pi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function Gi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vi(n.key),n)}}function Fi(){return Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Fi.apply(this,arguments)}function Hi(e,t){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hi(e,t)}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xi(e)}function zi(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Wi(e,t,r){return(t=Vi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e){var t=function(e,t){if("object"!=Mi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mi(t)?t:String(t)}function Yi(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ki(e,t,"set"),r),r}function Zi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ki(e,t,"get"))}function Ki(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ji=new WeakMap,qi=new WeakMap,Qi=new WeakMap,Xi=new WeakMap;const $i=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hi(e,t)}(p,t);var r,n,o,s,u=(o=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xi(o);if(s){var r=xi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ui(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Wi(Ui(e=u.call.apply(u,[this].concat(r))),"_defaultStorageType",c.PLATFORM_INTERNAL),Wi(Ui(e),"_isPlayerAuthorized",!0),zi(Ui(e),Ji,{writable:!0,value:void 0}),zi(Ui(e),qi,{writable:!0,value:void 0}),zi(Ui(e),Qi,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),zi(Ui(e),Xi,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=p,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:Fi(xi(p.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){switch(Zi(this,Ji)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return Fi(xi(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],Yi(e,Ji,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?lr("https://sad.adsgram.ai/js/sad.min.js").then((function(){Yi(e,qi,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(h.INITIALIZE)})):e._resolvePromiseDecorator(h.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):Fi(xi(p.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Fi(xi(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Fi(xi(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):Fi(xi(p.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):Fi(xi(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):Fi(xi(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;Zi(this,qi)?(Zi(this,qi).addEventListener("onStart",Zi(this,Xi).onStart),Zi(this,qi).addEventListener("onSkip",Zi(this,Xi).onSkip),Zi(this,qi).addEventListener("onError",Zi(this,Xi).onError),Zi(this,qi).addEventListener("onBannerNotFound",Zi(this,Xi).onError),Zi(this,qi).show().finally((function(){Zi(e,qi).removeEventListener("onStart",Zi(e,Xi).onStart),Zi(e,qi).removeEventListener("onSkip",Zi(e,Xi).onSkip),Zi(e,qi).removeEventListener("onError",Zi(e,Xi).onError),Zi(e,qi).removeEventListener("onBannerNotFound",Zi(e,Xi).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;Zi(this,qi)?(Zi(this,qi).addEventListener("onStart",Zi(this,Qi).onStart),Zi(this,qi).addEventListener("onSkip",Zi(this,Qi).onSkip),Zi(this,qi).addEventListener("onReward",Zi(this,Qi).onReward),Zi(this,qi).addEventListener("onError",Zi(this,Qi).onError),Zi(this,qi).addEventListener("onBannerNotFound",Zi(this,Qi).onError),Zi(this,qi).show().finally((function(){Zi(e,qi).addEventListener("onStart",Zi(e,Qi).onStart),Zi(e,qi).addEventListener("onSkip",Zi(e,Qi).onSkip),Zi(e,qi).addEventListener("onReward",Zi(e,Qi).onReward),Zi(e,qi).addEventListener("onError",Zi(e,Qi).onError),Zi(e,qi).addEventListener("onBannerNotFound",Zi(e,Qi).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(h.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(h.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(h.CLIPBOARD_READ,t):e._rejectPromiseDecorator(h.CLIPBOARD_READ)}))),t.promise}}])&&Gi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Or);var ea=["player"];function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=ia(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function oa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ia(n.key),n)}}function ia(e){var t=function(e,t){if("object"!=na(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==na(t)?t:String(t)}function aa(){return aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ca(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},aa.apply(this,arguments)}function sa(e,t){return sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sa(e,t)}function ua(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ca(e){return ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ca(e)}function la(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function fa(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var pa="userData",da="6129580795478709",ha=new WeakSet,ya=new WeakSet;function ma(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:pa},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function va(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=c.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var u=s.thumb_url,l=s.medium_url,f=s.large_url;u&&this._playerPhotos.push(u),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const _a=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sa(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ca(o);if(s){var r=ca(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ua(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return la(ua(e=u.call.apply(u,[this].concat(r))),ya),la(ua(e),ha),e}return r=l,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return p}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(h.INITIALIZE);return r||(r=this._createPromiseDecorator(h.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?lr("https://cdn.y8.com/api/sdk.js").then((function(){pr("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,n,o,i,a;(t={hostId:"ca-host-pub-".concat(da),adsenseId:e._options.channelId?"ca-pub-".concat(da):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,n=t.adsenseId,o=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",n),o?t.setAttribute("data-ad-channel",o):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){fa(e,ya,va).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(h.INITIALIZE,g)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){fa(e,ya,va).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||aa(ca(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:aa(ca(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){fa(n,ha,ma).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==na(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):aa(ca(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){fa(n,ha,ma).call(n).then((function(i){var a=ra({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:pa,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):aa(ca(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){fa(r,ha,ma).call(r).then((function(o){var i=ra({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:pa,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):aa(ca(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(h.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(h.LEADERBOARDS_SET_SCORE);var o={table:e,points:t};this._platformSdk.GameAPI.Leaderboards.save(o,(function(e){var t=e.success,n=e.errormessage;t?r._resolvePromiseDecorator(h.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(h.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);var n={table:e,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(e){var r=e.scores,n=e.success,o=e.errormessage;if(n){var i=r.map((function(e){return{id:e.playerid,name:e.playername,score:e.points,rank:e.rank,photo:null}}));t._resolvePromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,i)}else t._rejectPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return ra(ra({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ea)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&oa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ba(n.key),n)}}function ba(e){var t=function(e,t){if("object"!=ga(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ga(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ga(t)?t:String(t)}function Ea(){return Ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ea.apply(this,arguments)}function Pa(e,t){return Pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pa(e,t)}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wa(e)}const Aa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pa(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wa(o);if(s){var r=wa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ga(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"leaderboardsType",get:function(){return d}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?lr("https://lagged.com/api/rev-share/lagged.js").then((function(){pr("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}))})):this._rejectPromiseDecorator(h.INITIALIZE,b)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==c.PLATFORM_INTERNAL&&Ea(wa(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==c.PLATFORM_INTERNAL&&Ea(wa(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(h.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(h.LEADERBOARDS_SET_SCORE);var o={score:t,board:e};this._platformSdk.Scores.save(o,(function(e){e.success?r._resolvePromiseDecorator(h.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(h.LEADERBOARDS_SET_SCORE,e.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&Sa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function Oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(r),!0).forEach((function(t){Ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ba(n.key),n)}}function Ra(){return Ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ja(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ra.apply(this,arguments)}function Ta(e,t){return Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ta(e,t)}function La(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ja(e){return ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ja(e)}function Na(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ca(e,t,r){return(t=Ba(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ba(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Da(t)?t:String(t)}function Ma(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ga=new WeakSet,Fa=new WeakSet;function Ha(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function Ua(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}const xa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ta(e,t)}(y,t);var r,n,o,u,d=(o=y,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ja(o);if(u){var r=ja(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return La(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Na(La(e=d.call.apply(d,[this].concat(r))),Fa),Na(La(e),Ga),Ca(La(e),"_contextId",null),Ca(La(e),"_supportedApis",[]),Ca(La(e),"_preloadedInterstitialPromises",{}),Ca(La(e),"_preloadedRewardedPromises",{}),Ca(La(e),"_defaultStorageType",c.PLATFORM_INTERNAL),e}return r=y,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return Ra(ja(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return p}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return pr("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){e._isPlayerAuthorized=!0,e._playerId=e._platformSdk.player.getID(),e._contextId=e._platformSdk.context.getID();var t=e._platformSdk.getLocale();t&&t.length>2&&(e._platformLanguage=t.substring(0,2).toLowerCase()),e._supportedApis=e._platformSdk.getSupportedAPIs(),e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)})).catch((function(t){return e._rejectPromiseDecorator(h.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===f.GAME_READY?(this._platformSdk.setLoadingProgress(100),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):Ra(ja(y.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):Ra(ja(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ra(ja(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==Da(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):Ra(ja(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):Ra(ja(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):Ra(ja(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e,t){var r=this;this._platformSdk.loadBannerAdAsync(t,e).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(e){Ma(this,Ga,Ha).call(this,e)}},{key:"showInterstitial",value:function(e){var t=this;Ma(this,Ga,Ha).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!1)})).finally((function(){Ma(t,Ga,Ha).call(t,e,!0)}))}},{key:"preloadRewarded",value:function(e){Ma(this,Fa,Ua).call(this,e)}},{key:"showRewarded",value:function(e){var t=this;Ma(this,Fa,Ua).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!0)})).finally((function(){Ma(t,Fa,Ua).call(t,e,!0)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(h.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(h.LEADERBOARDS_SET_SCORE),this._platformSdk.globalLeaderboards.setScoreAsync(e,t).then((function(){r._resolvePromiseDecorator(h.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(h.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES),this._platformSdk.globalLeaderboards.getTopEntriesAsync(e,10).then((function(e){var r=null,n=0;e&&e.entries.length>0&&(r=e.entries.map((function(e){var t=e.getPlayer(),r=n;return n+=1,{rank:r,score:e.getScore(),id:t.getID(),name:t.getName(),photo:t.getPhoto()}}))),t._resolvePromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(h.PURCHASE);return n||(n=this._createPromiseDecorator(h.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.id}).then((function(r){var n=ka({id:e},r);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(h.PURCHASE,r)})).catch((function(e){t._rejectPromiseDecorator(h.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(h.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(h.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(h.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(h.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(h.GET_CATALOG);return r||(r=this._createPromiseDecorator(h.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=t.map((function(e){var t=r.find((function(t){return t.productID===e.id}));return{id:e.id,title:t.title,description:t.description,imageURI:t.imageURI,price:t.price,priceCurrencyCode:t.priceCurrencyCode,priceValue:t.priceAmount}}));e._resolvePromiseDecorator(h.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(h.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(h.GET_PURCHASES);return t||(t=this._createPromiseDecorator(h.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=ka({id:r.find((function(t){return t.id===e.productID})).id},e);return delete t.productID,t})),e._resolvePromiseDecorator(h.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(h.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!dr(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(h.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(h.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(h.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(h.INVITE_FRIENDS,t)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!dr(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(h.SHARE);return r||(r=this._createPromiseDecorator(h.SHARE),this._platformSdk.shareAsync(ka({intent:"REQUEST"},e)).then((function(){t._resolvePromiseDecorator(h.SHARE)})).catch((function(e){t._rejectPromiseDecorator(h.SHARE,e)}))),r.promise}}],n&&Ia(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(Or);function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Va(n.key),n)}}function Va(e){var t=function(e,t){if("object"!=za(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==za(t)?t:String(t)}var Ya,Za=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Wa(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(r),!0).forEach((function(t){ns(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qa(e){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(e)}function Qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,os(n.key),n)}}function Xa(e,t){return Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xa(e,t)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e,t){as(e,t),t.add(e)}function ts(){return ts="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ts.apply(this,arguments)}function rs(e){return rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rs(e)}function ns(e,t,r){return(t=os(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function os(e){var t=function(e,t){if("object"!=qa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qa(t)?t:String(t)}function is(e,t,r){as(e,t),t.set(e,r)}function as(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ss(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}function us(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var cs="banner",ls="get_data_from_storage",fs="get_server_time",ps="clipboard_read",ds="unlock_achievement",hs="get_achievements",ys="get_performance_resources",ms="isStorageInternalSupported",vs="isStorageLocalSupported",_s=new WeakMap,gs=new WeakMap,Ss=new WeakSet,bs=new WeakSet,Es=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xa(e,t)}(y,r);var n,o,u,l,p=(u=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rs(u);if(l){var r=rs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $a(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return es($a(e=p.call.apply(p,[this].concat(r))),bs),es($a(e),Ss),is($a(e),_s,{get:Ps,set:void 0}),is($a(e),gs,{writable:!0,value:new Za}),ns($a(e),"_supportedFeatures",[]),e}return n=y,(o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"leaderboardsType",get:function(){return d}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(h.INITIALIZE);return r||(r=this._createPromiseDecorator(h.INITIALIZE),this._defaultStorageType=c.PLATFORM_INTERNAL,ss(this,gs).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===h.INITIALIZE&&us(e,Ss,ws).call(e,n),n.action===ys)){var o,i=ss(e,gs).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];us(e,bs,As).call(e,i,a)}})),ss(this,gs).send({type:t.PLATFORM,action:h.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(e){var r=this,n=this._getPromiseDecorator(h.AUTHORIZE_PLAYER);if(!n){n=this._createPromiseDecorator(h.AUTHORIZE_PLAYER);var o=ss(this,gs).generateMessageId();ss(this,gs).addListener((function e(n){var i=n.data;if((null==i?void 0:i.type)===t.PLAYER&&i.action===h.AUTHORIZE_PLAYER&&i.id===o){var a=i.player,s=i.auth;"success"===s.status?(r._isPlayerAuthorized=!0,r._playerId=a.userId,r._playerName=a.name,a.profilePictureUrl&&(r._playerPhotos=[a.profilePictureUrl]),r._resolvePromiseDecorator(h.AUTHORIZE_PLAYER)):r._rejectPromiseDecorator(h.AUTHORIZE_PLAYER,s.error),ss(r,gs).removeListener(e)}})),ss(this,gs).send({type:t.PLAYER,action:h.AUTHORIZE_PLAYER,id:o,options:e})}return n.promise}},{key:"sendMessage",value:function(e){return[f.GAME_READY,f.IN_GAME_LOADING_STARTED,f.IN_GAME_LOADING_STOPPED,f.GAMEPLAY_STARTED,f.GAMEPLAY_STOPPED,f.PLAYER_GOT_ACHIEVEMENT,f.GAME_OVER].includes(e)?(ss(this,gs).send({type:t.PLATFORM,action:e}),Promise.resolve()):ts(rs(y.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=ss(e,gs).generateMessageId(),a=function a(s){var u=s.data;if((null==u?void 0:u.type)===t.PLATFORM&&u.action===fs&&u.id===i){if(!u.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(u.time),ss(e,gs).removeListener(a)}};ss(e,gs).addListener(a),ss(e,gs).send({type:t.PLATFORM,action:fs,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),ss(e,gs).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return ss(this,gs).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==c.PLATFORM_INTERNAL||!this._supportedFeatures.includes(ms))||!(e!==c.LOCAL_STORAGE||!this._supportedFeatures.includes(vs))}},{key:"isStorageAvailable",value:function(e){return ss(this,gs).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==c.PLATFORM_INTERNAL||!this._supportedFeatures.includes(ms))||!(e!==c.LOCAL_STORAGE||!this._supportedFeatures.includes(vs))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(r===c.PLATFORM_INTERNAL||r===c.LOCAL_STORAGE&&ss(this,_s)){var i=ss(this,gs).generateMessageId();return new Promise((function(a){ss(o,gs).addListener((function e(r){var n=r.data;if((null==n?void 0:n.type)===t.STORAGE&&n.action===ls&&n.id===i){var s=Object.values(n.storage);a(s),ss(o,gs).removeListener(e)}})),ss(o,gs).send({type:t.STORAGE,action:ls,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return ss(this,gs).send({type:t.STORAGE,action:ls,options:{key:e,storageType:r,tryParseJson:n}}),ts(rs(y.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return ss(this,gs).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),n===c.PLATFORM_INTERNAL||n===c.LOCAL_STORAGE&&ss(this,_s)?Promise.resolve():ts(rs(y.prototype),"setDataToStorage",this).call(this,e,r,n)}},{key:"deleteDataFromStorage",value:function(e,r){return ss(this,gs).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),r===c.PLATFORM_INTERNAL||r===c.LOCAL_STORAGE&&ss(this,_s)?Promise.resolve():ts(rs(y.prototype),"deleteDataFromStorage",this).call(this,e,r)}},{key:"showInterstitial",value:function(e){var r=this;ss(this,gs).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setInterstitialState(i.LOADING);break;case"open":r._setInterstitialState(i.OPENED);break;case"failed":r._setInterstitialState(i.FAILED);break;case"close":r._setInterstitialState(i.CLOSED),ss(r,gs).removeListener(e)}})),ss(this,gs).send({type:t.ADVERTISEMENT,action:"interstitial",options:{placement:e}})}},{key:"showRewarded",value:function(e){var r=this;ss(this,gs).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setRewardedState(a.LOADING);break;case"open":r._setRewardedState(a.OPENED);break;case"failed":r._setRewardedState(a.FAILED);break;case"rewarded":r._setRewardedState(a.REWARDED);break;case"close":r._setRewardedState(a.CLOSED),ss(r,gs).removeListener(e)}})),ss(this,gs).send({type:t.ADVERTISEMENT,action:"reward",options:{placement:e}})}},{key:"showBanner",value:function(e,r){this._setBannerState(s.SHOWN),ss(this,gs).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:cs,position:e,placement:r}})}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN),ss(this,gs).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:cs}})}},{key:"checkAdBlock",value:function(){return ss(this,gs).send({type:"check_adblock",action:h.ADBLOCK_DETECT}),ts(rs(y.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){var e=this._getPromiseDecorator(h.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(h.INVITE_FRIENDS),this._resolvePromiseDecorator(h.INVITE_FRIENDS),ss(this,gs).send({type:t.SOCIAL,action:h.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(h.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(h.JOIN_COMMUNITY),this._resolvePromiseDecorator(h.JOIN_COMMUNITY),ss(this,gs).send({type:t.SOCIAL,action:h.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){var e=this._getPromiseDecorator(h.SHARE);return e||(e=this._createPromiseDecorator(h.SHARE),this._resolvePromiseDecorator(h.SHARE),ss(this,gs).send({type:t.SOCIAL,action:h.SHARE})),e.promise}},{key:"createPost",value:function(){var e=this._getPromiseDecorator(h.CREATE_POST);return e||(e=this._createPromiseDecorator(h.CREATE_POST),this._resolvePromiseDecorator(h.CREATE_POST),ss(this,gs).send({type:t.SOCIAL,action:h.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){var e=this._getPromiseDecorator(h.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(h.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(h.ADD_TO_HOME_SCREEN),ss(this,gs).send({type:t.SOCIAL,action:h.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){var e=this._getPromiseDecorator(h.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(h.ADD_TO_FAVORITES),this._resolvePromiseDecorator(h.ADD_TO_FAVORITES),ss(this,gs).send({type:t.SOCIAL,action:h.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(h.RATE);return e||(e=this._createPromiseDecorator(h.RATE),this._resolvePromiseDecorator(h.RATE),ss(this,gs).send({type:t.SOCIAL,action:h.RATE})),e.promise}},{key:"paymentsPurchase",value:function(e){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();var o=this._getPromiseDecorator(h.PURCHASE);if(!o){o=this._createPromiseDecorator(h.PURCHASE);var i=ss(this,gs).generateMessageId();ss(this,gs).addListener((function n(o){var a=o.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===h.PURCHASE&&a.id===i){var s;if(!a.purchase||"object"!==qa(a.purchase))return r._rejectPromiseDecorator(h.PURCHASE,new Error("Invalid purchase")),void ss(r,gs).removeListener(n);if(null!==(s=a.purchase)&&void 0!==s&&s.status){var u=Ja({id:e},a.purchase.purchaseData);delete u.commonId,r._paymentsPurchases.push(u),r._resolvePromiseDecorator(h.PURCHASE,u)}else{var c;r._rejectPromiseDecorator(h.PURCHASE,(null===(c=a.purchase)||void 0===c?void 0:c.error)||new Error("Unknown purchase error"))}ss(r,gs).removeListener(n)}})),ss(this,gs).send({type:t.PAYMENTS,action:h.PURCHASE,id:i,options:{product:n}})}return o.promise}},{key:"paymentsConsumePurchase",value:function(e){var r=this,n=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(h.CONSUME_PURCHASE);if(!o){o=this._createPromiseDecorator(h.CONSUME_PURCHASE);var i=ss(this,gs).generateMessageId();ss(this,gs).addListener((function o(a){var s=a.data;if((null==s?void 0:s.type)===t.PAYMENTS&&s.action===h.CONSUME_PURCHASE&&s.id===i){var u;if(!s.purchase||"object"!==qa(s.purchase))return r._rejectPromiseDecorator(h.CONSUME_PURCHASE,new Error("Invalid purchase")),void ss(r,gs).removeListener(o);if(null!==(u=s.purchase)&&void 0!==u&&u.status){var c=Ja({id:e},s.purchase);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(h.CONSUME_PURCHASE,c)}else{var l;r._rejectPromiseDecorator(h.CONSUME_PURCHASE,(null===(l=s.purchase)||void 0===l?void 0:l.error)||new Error("Unknown consume purchase error"))}ss(r,gs).removeListener(o)}})),ss(this,gs).send({type:t.PAYMENTS,action:h.CONSUME_PURCHASE,id:i,options:{product:this._paymentsPurchases[n]}})}return o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,r=this._getPromiseDecorator(h.GET_CATALOG);if(!r){r=this._createPromiseDecorator(h.GET_CATALOG);var n=this._paymentsGetProductsPlatformData(),o=ss(this,gs).generateMessageId();ss(this,gs).addListener((function r(i){var a=i.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===h.GET_CATALOG&&a.id===o){var s=n.map((function(e){return{id:e.id,price:"".concat(e.amount," Golden Fennec"),priceCurrencyCode:"Golden Fennec",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));ss(e,gs).removeListener(r),e._resolvePromiseDecorator(h.GET_CATALOG,s)}})),ss(this,gs).send({type:t.PAYMENTS,action:h.GET_CATALOG,id:o})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,r=this._getPromiseDecorator(h.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(h.GET_PURCHASES);var n=ss(this,gs).generateMessageId();ss(this,gs).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===h.GET_PURCHASES&&i.id===n){var a=e._paymentsGetProductsPlatformData();e._paymentsPurchases=i.purchases.map((function(e){return Ja({id:a.find((function(t){return t.id===e.id})).id},e.purchaseData)})),ss(e,gs).removeListener(r),e._resolvePromiseDecorator(h.GET_PURCHASES,e._paymentsPurchases)}})),ss(this,gs).send({type:t.PAYMENTS,action:h.GET_PURCHASES,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this,r=this._getPromiseDecorator(h.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(h.GET_REMOTE_CONFIG);var n=ss(this,gs).generateMessageId();ss(this,gs).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===h.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(h.GET_REMOTE_CONFIG,i.result),ss(e,gs).removeListener(r))})),ss(this,gs).send({type:t.REMOTE_CONFIG,action:h.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this,n=this._getPromiseDecorator(h.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(h.CLIPBOARD_WRITE);var o=ss(this,gs).generateMessageId();ss(this,gs).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===h.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(h.CLIPBOARD_WRITE,!0),ss(r,gs).removeListener(e))})),ss(this,gs).send({type:t.CLIPBOARD,action:h.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this,r=this._getPromiseDecorator(ps);if(!r){r=this._createPromiseDecorator(ps);var n=ss(this,gs).generateMessageId();ss(this,gs).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===ps&&i.id===n){var a=i.text;e._resolvePromiseDecorator(ps,a),ss(e,gs).removeListener(r)}})),ss(this,gs).send({type:t.CLIPBOARD,action:ps,id:n,options:{}})}return r.promise}},{key:"leaderboardsSetScore",value:function(e,r){var n=this._getPromiseDecorator(h.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(h.LEADERBOARDS_SET_SCORE);var o={id:e,score:r};ss(this,gs).send({type:t.LEADERBOARDS,action:h.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(h.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var r=this,n=this._getPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);if(!n){n=this._createPromiseDecorator(h.LEADERBOARDS_GET_ENTRIES);var o=ss(this,gs).generateMessageId();ss(this,gs).addListener((function e(n){var i;(null===(i=n.data)||void 0===i?void 0:i.type)===t.LEADERBOARDS&&n.data.action===h.LEADERBOARDS_GET_ENTRIES&&n.data.id===o&&(r._resolvePromiseDecorator(h.LEADERBOARDS_GET_ENTRIES,n.data.entries),ss(r,gs).removeListener(e))}));var i={id:e};ss(this,gs).send({type:t.LEADERBOARDS,action:h.LEADERBOARDS_GET_ENTRIES,id:o,options:i})}return n.promise}},{key:"unlockAchievement",value:function(e){var r=this;return new Promise((function(n){var o=ss(r,gs).generateMessageId();ss(r,gs).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===ds&&a.id===o&&(n(a.result),ss(r,gs).removeListener(e))})),ss(r,gs).send({type:t.ACHIEVEMENTS,action:ds,id:o,options:e})}))}},{key:"getAchievementsList",value:function(e){var r=this;return new Promise((function(n){var o=ss(r,gs).generateMessageId();ss(r,gs).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===hs&&a.id===o&&(n(a.result),ss(r,gs).removeListener(e))})),ss(r,gs).send({type:t.ACHIEVEMENTS,action:hs,id:o,options:e})}))}},{key:"showAchievementsNativePopup",value:function(){return ss(this,gs).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(e){return Ja({id:e.id},e.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?Ja({id:r.id},r.playgama):null}}])&&Qa(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),y}(Or);function Ps(){return this._supportedFeatures.includes("isStorageRemoteLocalSupported")}function ws(e){var t,r,n,o;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes("isBannerSupported");var i=e.config,a=void 0===i?{}:i;this._deviceType=null!==(t=a.deviceType)&&void 0!==t?t:ts(rs(Ya.prototype),"deviceType",this),this._platformLanguage=null!==(r=a.platformLanguage)&&void 0!==r?r:ts(rs(Ya.prototype),"platformLanguage",this),this._platformTld=null!==(n=a.platformTld)&&void 0!==n?n:ts(rs(Ya.prototype),"platformTld",this),this._platformPayload=null!==(o=a.platformPayload)&&void 0!==o?o:ts(rs(Ya.prototype),"platformPayload",this),this._paymentsPurchases=e.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(h.INITIALIZE),ss(this,gs).send({type:"liveness",action:"ping",options:{version:"1.23.0"}})}function As(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return ss(this,gs).send({type:t.PLATFORM,action:ys,id:e,options:{resources:a}}),Promise.resolve(o)}Ya=Es;const Os=Es;function ks(e){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function Ds(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Is(n.key),n)}}function Is(e){var t=function(e,t){if("object"!=ks(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ks(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ks(t)?t:String(t)}function Rs(){return Rs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ls(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Rs.apply(this,arguments)}function Ts(e,t){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ts(e,t)}function Ls(e){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ls(e)}const js=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ts(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ls(o);if(s){var r=Ls(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ks(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);return t||(t=this._createPromiseDecorator(h.INITIALIZE),lr("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){pr("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return Rs(Ls(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&Ds(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Or);function Ns(e){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(e)}function Cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Gs(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ms(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gs(n.key),n)}}function Gs(e){var t=function(e,t){if("object"!=Ns(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ns(t)?t:String(t)}function Fs(e,t){return Fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fs(e,t)}function Hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Us(e)}function xs(e,t){zs(e,t),t.add(e)}function zs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ws(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Vs(e,t,"get"))}function Vs(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Ys(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Zs=new WeakMap,Ks=new WeakSet,Js=new WeakSet,qs=new WeakSet;function Qs(){var e=this;return Ws(this,Zs)?new Promise((function(t){Ws(e,Zs).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!1).then((function(){return t()}));case"ready":e._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){e._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!1).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setInterstitialState(i.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!1)}function Xs(){var e=this;return Ws(this,Zs)?new Promise((function(t){Ws(e,Zs).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!0).then((function(){return t()}));case"ready":e._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){e._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){e._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!0).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setRewardedState(a.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!0)}function $s(e){e.playerId&&(this._isPlayerAuthorized=!0,this._playerId=e.playerId,this._playerName=e.playerDisplayName)}const eu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fs(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Us(o);if(u){var r=Us(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ns(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hs(e)}(this,e)});function l(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return xs(Hs(e=c.call.apply(c,[this].concat(i))),qs),xs(Hs(e),Js),xs(Hs(e),Ks),n={writable:!0,value:null},zs(t=Hs(e),r=Zs),r.set(t,n),e}return r=l,(n=[{key:"platformId",get:function(){return e.MSN}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return d}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(h.INITIALIZE);if(!t){var r;t=this._createPromiseDecorator(h.INITIALIZE),lr("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function(){return pr("$msstart")})).then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Ys(e,qs,$s).call(e,t)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(h.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&lr("https://playgama.com/ads/ads.v0.1.js").then((function(){return pr("pgAds")})).then((function(){window.pgAds.init(n).then((function(){var t,r,n;t=e,r=Zs,n=window.pgAds,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,Vs(t,r,"set"),n);var o=e._options.gameId;Ws(e,Zs).updateTargeting({gameId:o})}))}))}return t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Ys(e,qs,$s).call(e,r),t()})).catch((function(e){r(e)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;return new Promise((function(e,n){r._platformSdk.submitGameResultsAsync(t).then(e).catch(n)}))}},{key:"showBanner",value:function(e){var t,r=this;t="top"===e?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([t]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.loadAdsAsync(!1).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){return Ys(e,Ks,Qs).call(e)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.loadAdsAsync(!0).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){return Ys(e,Js,Xs).call(e)}))}},{key:"paymentsPurchase",value:function(e){var t=this;if(!this._paymentsGetProductPlatformData(e))return Promise.reject();var r=this._getPromiseDecorator(h.PURCHASE);return r||(r=this._createPromiseDecorator(h.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:e}).then((function(r){if("IAP_PURCHASE_FAILURE"!==r.code){var n=Bs(Bs({id:e},r.receipt),{},{receiptSignature:r.receiptSignature});delete n.productId,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(h.PURCHASE,n)}else t._rejectPromiseDecorator(h.PURCHASE,r.description)})).catch((function(e){t._rejectPromiseDecorator(h.PURCHASE,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(h.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(h.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].id}).then((function(n){if("IAP_CONSUME_FAILURE"!==n.code){t._paymentsPurchases.splice(r,1);var o=Bs(Bs({id:e},n.consumptionReceipt),{},{consumptionSignature:n.consumptionSignature});delete o.productId,t._resolvePromiseDecorator(h.CONSUME_PURCHASE,o)}else t._rejectPromiseDecorator(h.CONSUME_PURCHASE,n.description)})).catch((function(e){t._rejectPromiseDecorator(h.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(h.GET_CATALOG);return r||(r=this._createPromiseDecorator(h.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync().then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=t.map((function(e){var t=r.find((function(t){return t.productId===e.id}));return{id:e.id,title:t.title,description:t.description,publisherName:t.publisherName,inAppOfferToken:t.inAppOfferToken,isConsumable:t.isConsumable,price:"".concat(t.price.listPrice," ").concat(t.price.currencyCode," "),priceCurrencyCode:t.price.currencyCode,priceValue:t.price.listPrice}}));e._resolvePromiseDecorator(h.GET_CATALOG,n)}else e._rejectPromiseDecorator(h.GET_CATALOG,r.description)})).catch((function(t){e._rejectPromiseDecorator(h.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(h.GET_PURCHASES);return t||(t=this._createPromiseDecorator(h.GET_PURCHASES),this._platformSdk.iap.getAllPurchasesAsync().then((function(t){if("IAP_GET_ALL_PURCHASES_FAILURE"!==t.code){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.receipts.map((function(e){var n=Bs(Bs({id:r.find((function(t){return t.id===e.productId})).id},e),{},{receiptSignature:t.receiptSignature});return delete n.productId,n})),e._resolvePromiseDecorator(h.GET_PURCHASES,e._paymentsPurchases)}else e._rejectPromiseDecorator(h.GET_PURCHASES,t.description)})).catch((function(t){e._rejectPromiseDecorator(h.GET_PURCHASES,t)}))),t.promise}}])&&Ms(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Or);function tu(e){return tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(e)}function ru(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=iu(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ru(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iu(n.key),n)}}function iu(e){var t=function(e,t){if("object"!=tu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tu(t)?t:String(t)}function au(e,t){uu(e,t),t.add(e)}function su(e,t,r){uu(e,t),t.set(e,r)}function uu(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cu(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,pu(e,t,"set"),r),r}function lu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function fu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,pu(e,t,"get"))}function pu(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var du=new WeakMap,hu=new WeakMap,yu=new WeakMap,mu=new WeakMap,vu=new WeakSet,_u=new WeakSet,gu=new WeakSet;function Su(t){var r,n=e.MOCK,o=new URL(window.location.href);if(t.forciblySetPlatformId)n=lu(this,_u,bu).call(this,t.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=lu(this,_u,bu).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=e.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=e.PLAYDECK:o.hash.includes("tgWebAppData")?n=e.TELEGRAM:o.hostname.includes("y8")?n=e.Y8:o.hostname.includes("fbsbx")?n=e.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=e.POKI:(o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg"))&&(n=e.MSN)}var a=t;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=mr(a,a.platforms[n])),delete a.platforms,n){case e.VK:cu(this,yu,new Ur(a));break;case e.YANDEX:cu(this,yu,new ln(a));break;case e.CRAZY_GAMES:cu(this,yu,new In(a));break;case e.ABSOLUTE_GAMES:cu(this,yu,new Un(a));break;case e.GAME_DISTRIBUTION:cu(this,yu,new Xn(a));break;case e.OK:cu(this,yu,new ti(a));break;case e.PLAYGAMA:cu(this,yu,new Si(a));break;case e.PLAYDECK:cu(this,yu,new Bi(a));break;case e.TELEGRAM:cu(this,yu,new $i(a));break;case e.Y8:cu(this,yu,new _a(a));break;case e.LAGGED:cu(this,yu,new Aa(a));break;case e.FACEBOOK:cu(this,yu,new xa(a));break;case e.POKI:cu(this,yu,new js(a));break;case e.QA_TOOL:cu(this,yu,new Os(a));break;case e.MSN:cu(this,yu,new eu(a));break;default:cu(this,yu,new Or(a))}}function bu(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function Eu(e){return fu(this,du)||console.error(y),fu(this,mu)[e]}const Pu=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),au(this,gu),au(this,_u),au(this,vu),su(this,du,{writable:!0,value:!1}),su(this,hu,{writable:!0,value:null}),su(this,yu,{writable:!0,value:null}),su(this,mu,{writable:!0,value:{}})}var u,p;return u=r,(p=[{key:"version",get:function(){return"1.23.0"}},{key:"isInitialized",get:function(){return fu(this,du)}},{key:"options",get:function(){return fu(this,yu).options}},{key:"platform",get:function(){return lu(this,gu,Eu).call(this,t.PLATFORM)}},{key:"player",get:function(){return lu(this,gu,Eu).call(this,t.PLAYER)}},{key:"game",get:function(){return lu(this,gu,Eu).call(this,t.GAME)}},{key:"storage",get:function(){return lu(this,gu,Eu).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return lu(this,gu,Eu).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return lu(this,gu,Eu).call(this,t.SOCIAL)}},{key:"device",get:function(){return lu(this,gu,Eu).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return lu(this,gu,Eu).call(this,t.LEADERBOARDS)}},{key:"leaderboards",get:function(){return lu(this,gu,Eu).call(this,t.LEADERBOARDS)}},{key:"payments",get:function(){return lu(this,gu,Eu).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return lu(this,gu,Eu).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return lu(this,gu,Eu).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return lu(this,gu,Eu).call(this,t.CLIPBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return f}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return c}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"initialize",value:function(e){var r=this;if(fu(this,du))return Promise.resolve();if(!fu(this,hu)){cu(this,hu,new j);var n,o="./playgama-bridge-config.json";e&&e.configFilePath&&(o=e.configFilePath),fetch(o).then((function(e){return e.json()})).then((function(e){n=nu({},e)})).catch((function(){n=nu({},e)})).finally((function(){lu(r,vu,Su).call(r,n),fu(r,mu)[t.PLATFORM]=new Z(fu(r,yu)),fu(r,mu)[t.PLAYER]=new $(fu(r,yu)),fu(r,mu)[t.GAME]=new ue(fu(r,yu)),fu(r,mu)[t.STORAGE]=new he(fu(r,yu)),fu(r,mu)[t.ADVERTISEMENT]=new ht(fu(r,yu)),fu(r,mu)[t.SOCIAL]=new St(fu(r,yu)),fu(r,mu)[t.DEVICE]=new Ot(fu(r,yu)),fu(r,mu)[t.LEADERBOARDS]=new Bt(fu(r,yu)),fu(r,mu)[t.PAYMENTS]=new xt(fu(r,yu)),fu(r,mu)[t.REMOTE_CONFIG]=new Kt(fu(r,yu)),fu(r,mu)[t.CLIPBOARD]=new er(fu(r,yu)),fu(r,mu)[t.ACHIEVEMENTS]=new ar(fu(r,yu)),fu(r,yu).initialize().then((function(){var e,n;if(cu(r,du,!0),console.info("%c PlaygamaBridge v.".concat(r.version," initialized. "),"background: #01A5DA; color: white"),fu(r,hu)&&(fu(r,hu).resolve(),cu(r,hu,null)),null!==(e=fu(r,yu).options)&&void 0!==e&&null!==(e=e.advertisement)&&void 0!==e&&null!==(e=e.interstitial)&&void 0!==e&&e.preloadOnStart){var o=fu(r,yu).options.advertisement.interstitial.preloadOnStart;fu(r,mu)[t.ADVERTISEMENT].preloadInterstitial(o)}if(null!==(n=fu(r,yu).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var i=fu(r,yu).options.advertisement.rewarded.preloadOnStart;fu(r,mu)[t.ADVERTISEMENT].preloadRewarded(i)}}))}))}return fu(this,hu).promise}}])&&ou(u.prototype,p),Object.defineProperty(u,"prototype",{writable:!1}),r}();window.bridge=new Pu,window.playgamaBridge=window.bridge})()})();
