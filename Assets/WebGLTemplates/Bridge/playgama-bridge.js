(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},u="banner-container",c={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},p="not_available",d="in_game",h="native",y={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},m={message:"Before using the SDK you must initialize it"},v={message:"Storage not supported"},_={message:"Storage not available"},g={message:"GameDistribution Game ID is undefined"},S={message:"Y8 Game params are not found"},b={message:"OK Game params are not found"},P={message:"Lagged Game params are not found"},E={message:"Huawei Game params are not found"},w={message:"GamePush Game params are not found"},A={message:"Message is too long"},O={message:"Discord Game params are not found"};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:String(t)}function T(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function R(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,j(e,t,"set"),r),r}function L(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,j(e,t,"get"))}function j(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var C=new WeakMap,N=new WeakMap,B=new WeakMap;const G=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,C,{writable:!0,value:void 0}),T(this,N,{writable:!0,value:void 0}),T(this,B,{writable:!0,value:void 0}),R(this,C,new Promise((function(e,r){R(t,N,e),R(t,B,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return L(this,C)}},{key:"resolve",value:function(e){L(this,N).call(this,e)}},{key:"reject",value:function(e){L(this,B).call(this,e)}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var M=r(258),H=r.n(M);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function U(e,t,r){return t&&x(e.prototype,t),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:String(t)}const z=U((function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=V(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t})),W=JSON.parse('{"i8":"1.26.0-preview.1"}');function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function J(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:String(t)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Q(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ee=new WeakMap,te=new WeakSet,re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(o);if(i){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}(this,e)});function s(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Q(r=q(t=a.call(this,e)),o=te),o.add(r),function(e,t,r){Q(e,t),t.set(e,{writable:!0,value:!1})}(q(t),ee),t._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(e){return t.emit(n.AUDIO_STATE_CHANGED,e)})),t._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(e){return t.emit(n.PAUSE_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(e){if(e===f.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,$(this,ee,"get")))return Promise.reject();(function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,$(e,t,"set"),r)})(this,ee,!0),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,te,ne).call(this);var t=document.getElementById("loading-overlay");t&&t.remove()}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&Y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(z);function ne(){var e,t=null===(e=this._platformBridge.options)||void 0===e?void 0:e.sendAnalyticsEvents,r=window.location.href;if(!(r.startsWith("file://")||r.includes("localhost")||r.includes("127.0.0.1"))&&!1!==t){var n="https://playgama.com/api/v1/events";"discord"===this._platformBridge.platformId&&(n="/playgama/api/v1/events"),fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:"game_ready",pageName:"".concat(this._platformBridge.platformId,":").concat(this._platformBridge.engine),userId:"bridge:".concat(W.i8),clid:window.location.href})}).then((function(e){if(!e.ok)throw new Error("Network response was not ok: ".concat(e.status))})).catch((function(e){console.error("Error sending event:",e)}))}}H().mixin(re.prototype);const oe=re;function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function se(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(t)?t:String(t)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}const le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(n);if(o){var r=ce(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e,t,r){var n;return n=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==fe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var n=document.createElement("script");n.src=e;for(var o=0;o<Object.keys(t).length;o++){var i=Object.keys(t)[o],a=t[i];n.setAttribute(i,a)}n.addEventListener("load",r),document.head.appendChild(n)}))};function me(e){var t=document.createElement("div");return t.id=u,t.style.position="absolute",document.body.appendChild(t),"top"===e?(t.style.top="0px",t.style.height="90px",t.style.width="100%"):(t.style.bottom="0px",t.style.height="90px",t.style.width="100%"),t}var ve=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},_e=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},ge=function(e,t){return void 0===e[t]?null:e[t]};function Se(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=ge(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){}return e}),new Array(e.length)):ge(t,e)}function be(e,t){for(var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];i in e&&t[i]instanceof Object&&e[i]instanceof Object?r[i]=be(e[i],t[i]):r[i]=t[i]}return r}function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function ke(e,t,r){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pe(t)?t:String(t)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(o);if(i){var r=Oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ae(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),ke(Ae(t=a.call(this,e)),"_currentLoadingProgress",null),ke(Ae(t),"_loadingProcessCompleted",!1),t._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t._platformBridge.options.disableLoadingLogo||function(e){var t=document.createElement("style");t.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(t);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===e?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(o,i)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],u=a[3],c=Number(s),l=Number(u),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),d=document.createElementNS(f.namespaceURI,"mask");d.setAttribute("id","logo-mask");var h=document.createElementNS(f.namespaceURI,"rect");h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill","black"),d.appendChild(h),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("fill","white"),d.appendChild(t)})),p.appendChild(d);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(e){var t=e.offset,r=e.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",t),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(c*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("stroke",n.strokeColor),t.setAttribute("stroke-width","3"),f.appendChild(t)})),r.appendChild(f)}(t._platformBridge.options.showFullLoadingLogo),t}return t=s,r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||t&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=e;var a=Math.max(0,Math.min(100,e)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],r&&Ee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(z);H().mixin(De.prototype);const Te=De;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,je(n.key),n)}}function je(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:String(t)}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}const Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(n);if(o){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&Le(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function He(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:String(t)}function Fe(e,t){Ue(e,t),t.add(e)}function xe(e,t,r){Ue(e,t),t.set(e,r)}function Ue(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ve(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ze(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ze(e,t,"set"),r),r}function We(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Ze(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ye="started",Je=new WeakMap,Ke=new WeakMap,qe=new WeakMap,Xe=new WeakMap,Qe=new WeakSet,$e=new WeakSet,et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fe(this,$e),Fe(this,Qe),xe(this,Je,{writable:!0,value:0}),xe(this,Ke,{writable:!0,value:0}),xe(this,qe,{writable:!0,value:"created"}),xe(this,Xe,{writable:!0,value:0}),ze(this,Je,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return We(this,qe)}},{key:"start",value:function(){var e=this;We(this,qe)!==Ye&&(ze(this,Ke,We(this,Je)),Ve(this,Qe,tt).call(this,Ye),ze(this,Xe,setInterval((function(){ze(e,Ke,We(e,Ke)-1),e.emit("time_left_changed",We(e,Ke)),We(e,Ke)<=0&&(Ve(e,$e,rt).call(e),Ve(e,Qe,tt).call(e,"completed"))}),1e3)))}},{key:"stop",value:function(){Ve(this,$e,rt).call(this),We(this,qe)===Ye&&Ve(this,Qe,tt).call(this,"stopped")}}])&&Me(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tt(e){ze(this,qe,e),this.emit("state_changed",We(this,qe))}function rt(){clearInterval(We(this,Xe)),ze(this,Ke,0)}H().mixin(et.prototype);const nt=et;function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,at(n.key),n)}}function at(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:String(t)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function lt(e,t){pt(e,t),t.add(e)}function ft(e,t,r){pt(e,t),t.set(e,r)}function pt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dt(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,mt(e,t,"set"),r),r}function ht(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function yt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,mt(e,t,"get"))}function mt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,St=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Et=new WeakSet,wt=new WeakSet,At=new WeakSet,Ot=new WeakSet,kt=new WeakSet,It=new WeakSet,Dt=new WeakSet,Tt=new WeakSet,Rt=new WeakSet,Lt=new WeakSet,jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(l,e);var t,r,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ct(o);if(u){var r=ct(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ut(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),lt(ut(t=c.call(this,e)),Lt),lt(ut(t),Rt),lt(ut(t),Tt),lt(ut(t),Dt),lt(ut(t),It),lt(ut(t),kt),lt(ut(t),Ot),lt(ut(t),At),lt(ut(t),wt),lt(ut(t),Et),ft(ut(t),vt,{writable:!0,value:s.HIDDEN}),ft(ut(t),_t,{writable:!0,value:i.CLOSED}),ft(ut(t),gt,{writable:!0,value:void 0}),ft(ut(t),St,{writable:!0,value:60}),ft(ut(t),bt,{writable:!0,value:a.CLOSED}),ft(ut(t),Pt,{writable:!0,value:null}),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return ht(ut(t),Dt,Ft).call(ut(t),e)})),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&ht(ut(t),kt,Mt).call(ut(t)),ht(ut(t),Tt,xt).call(ut(t),e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return ht(ut(t),Rt,Ut).call(ut(t),e)})),ht(ut(t),At,Bt).call(ut(t)),t}return t=l,r=[{key:"isBannerSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return yt(this,vt)}},{key:"isInterstitialSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return yt(this,_t)}},{key:"isRewardedSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return yt(this,Pt)}},{key:"rewardedState",get:function(){return yt(this,bt)}},{key:"minimumDelayBetweenInterstitial",get:function(){return yt(this,St)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(null===ht(this,wt,Nt).call(this,ht(this,Ot,Gt).call(this))){var t=ht(this,wt,Nt).call(this,e);null!==t&&ht(this,Et,Ct).call(this,t)}}},{key:"showBanner",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN)if(ht(this,Dt,Ft).call(this,s.LOADING),this.isBannerSupported){var n,o=r;o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback);var i=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.placements,a=ht(this,Lt,Vt).call(this,o,i);this._platformBridge.showBanner(t,a)}else ht(this,Dt,Ft).call(this,s.FAILED)}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,i=ht(this,Lt,Vt).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!ht(this,It,Ht).call(this))if(ht(this,Tt,xt).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&yt(this,gt)&&yt(this,gt).state===Ye)ht(this,Tt,xt).call(this,i.FAILED);else{var r,n=t;n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,a=ht(this,Lt,Vt).call(this,n,o);this._platformBridge.showInterstitial(a)}else ht(this,Tt,xt).call(this,i.FAILED)}},{key:"preloadRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,i=ht(this,Lt,Vt).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!ht(this,It,Ht).call(this)){var r;dt(this,Pt,t),yt(this,Pt)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&dt(this,Pt,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=ht(this,Lt,Vt).call(this,yt(this,Pt),n);ht(this,Rt,Ut).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):ht(this,Rt,Ut).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&it(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(z);function Ct(e){dt(this,St,e),yt(this,gt)&&(yt(this,gt).stop(),ht(this,kt,Mt).call(this))}function Nt(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}return null}function Bt(){var e=ht(this,Ot,Gt).call(this);if(void 0!==e){var t=ht(this,wt,Nt).call(this,e);null!==t&&ht(this,Et,Ct).call(this,t)}}function Gt(){var e;return null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.minimumDelayBetweenInterstitial}function Mt(){yt(this,St)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(dt(this,gt,new nt(yt(this,St))),yt(this,gt).start())}function Ht(){var e=[i.LOADING,i.OPENED].includes(yt(this,_t)),t=[a.LOADING,a.OPENED,a.REWARDED].includes(yt(this,bt));return e||t}function Ft(e){yt(this,vt)!==e&&(dt(this,vt,e),this.emit(n.BANNER_STATE_CHANGED,yt(this,vt)))}function xt(e){yt(this,_t)!==e&&(dt(this,_t,e),this.emit(n.INTERSTITIAL_STATE_CHANGED,yt(this,_t)))}function Ut(e){yt(this,bt)!==e&&(dt(this,bt,e),this.emit(n.REWARDED_STATE_CHANGED,yt(this,bt)))}function Vt(e,t){if(!e)return e;if(!t)return e;var r=t.find((function(t){return t.id===e}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:e}H().mixin(jt.prototype);const zt=jt;function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yt(n.key),n)}}function Yt(e){var t=function(e,t){if("object"!=Wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wt(t)?t:String(t)}function Jt(e,t){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jt(e,t)}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kt(e)}const qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kt(n);if(o){var r=Kt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&Zt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$t(n.key),n)}}function $t(e){var t=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xt(t)?t:String(t)}function er(e,t){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},er(e,t)}function tr(e){return tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(e)}const rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tr(n);if(o){var r=tr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&Qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ir(n.key),n)}}function ir(e){var t=function(e,t){if("object"!=nr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nr(t)?t:String(t)}function ar(e,t){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ar(e,t)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}function cr(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function lr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var fr=new WeakSet,pr=new WeakSet;function dr(e){var t;if(!e)return e;var r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return e;var n=r.find((function(t){return t.id===e}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:e}function hr(e){var t,r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return!1;var n=r.find((function(t){return t.id===e}));return!!n&&!0===n.isMain}const yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ar(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ur(n);if(o){var r=ur(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return cr(sr(e=i.call.apply(i,[this].concat(r))),pr),cr(sr(e),fr),e}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(e,t){var r=lr(this,fr,dr).call(this,e),n=lr(this,pr,hr).call(this,e);return this._platformBridge.leaderboardsSetScore(r,t,n)}},{key:"getEntries",value:function(e){var t=lr(this,fr,dr).call(this,e);return this._platformBridge.leaderboardsGetEntries(t)}},{key:"showNativePopup",value:function(e){var t=lr(this,fr,dr).call(this,e);return this._platformBridge.leaderboardsShowNativePopup(t)}}])&&or(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_r(n.key),n)}}function _r(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mr(t)?t:String(t)}function gr(e,t){return gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gr(e,t)}function Sr(e){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sr(e)}const br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sr(n);if(o){var r=Sr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e,t){return this._platformBridge.paymentsPurchase(e,t)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}},{key:"consumePurchase",value:function(e){return this._platformBridge.paymentsConsumePurchase(e)}}])&&vr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function Er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wr(n.key),n)}}function wr(e){var t=function(e,t){if("object"!=Pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pr(t)?t:String(t)}function Ar(e,t){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ar(e,t)}function Or(e){return Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Or(e)}const kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ar(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Or(n);if(o){var r=Or(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&Er(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tr(n.key),n)}}function Tr(e){var t=function(e,t){if("object"!=Ir(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ir(t)?t:String(t)}function Rr(e,t){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rr(e,t)}function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lr(e)}const jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lr(n);if(o){var r=Lr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&Dr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Br(n.key),n)}}function Br(e){var t=function(e,t){if("object"!=Cr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cr(t)?t:String(t)}function Gr(e,t){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gr(e,t)}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}const Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mr(n);if(o){var r=Mr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&Nr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wr(n.key),n)}}function zr(e,t,r){return(t=Wr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wr(e){var t=function(e,t){if("object"!=Fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fr(t)?t:String(t)}function Zr(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Yr=new WeakMap,Jr=function(){function t(e){var r,n,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zr(this,"_isInitialized",!1),zr(this,"_platformSdk",null),zr(this,"_isPlayerAuthorized",!1),zr(this,"_playerId",null),zr(this,"_playerName",null),zr(this,"_playerPhotos",[]),zr(this,"_playerExtra",{}),zr(this,"_visibilityState",null),zr(this,"_localStorage",null),zr(this,"_defaultStorageType",c.LOCAL_STORAGE),zr(this,"_platformStorageCachedData",null),zr(this,"_isBannerSupported",!1),zr(this,"_paymentsPurchases",[]),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=Yr),n.set(r,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState,document.addEventListener("visibilitychange",(function(){a._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){a._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){a._setVisibilityState(o.VISIBLE)})),e&&(this._options=Ur({},e))}var r,u;return r=t,(u=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!0}},{key:"isPlatformPaused",get:function(){return!1}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return p}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://playgama.com/api/v1/timestamp/now").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.timestamp)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case c.LOCAL_STORAGE:return null!==this._localStorage;case c.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case c.LOCAL_STORAGE:return null!==this._localStorage;case c.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(v)}return Promise.reject(v)}},{key:"setDataToStorage",value:function(e,t,r){if(r===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===c.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){if(this.isPaymentsSupported){var t={id:e};return this._paymentsPurchases.push(t),Promise.resolve(t)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(e){if(this.isPaymentsSupported){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));return t<0?Promise.reject():(this._paymentsPurchases.splice(t,1),Promise.resolve({id:e}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===Fr(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){this._visibilityState!==e&&(this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState))}},{key:"_setBannerState",value:function(e){this.emit(n.BANNER_STATE_CHANGED,e)}},{key:"_setInterstitialState",value:function(e){this.emit(n.INTERSTITIAL_STATE_CHANGED,e)}},{key:"_setRewardedState",value:function(e){this.emit(n.REWARDED_STATE_CHANGED,e)}},{key:"_setAudioState",value:function(e){this.emit(n.AUDIO_STATE_CHANGED,e)}},{key:"_setPauseState",value:function(e){this.emit(n.PAUSE_STATE_CHANGED,e)}},{key:"_createPromiseDecorator",value:function(e){var t=new G;return Zr(this,Yr)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return Zr(this,Yr)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){Zr(this,Yr)[e]&&(Zr(this,Yr)[e].resolve(t),delete Zr(this,Yr)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){Zr(this,Yr)[e]&&(Zr(this,Yr)[e].reject(t),delete Zr(this,Yr)[e])}},{key:"_paymentsGetProductsPlatformData",value:function(){var e=this;return this._options.payments?this._options.payments.map((function(t){var r=Ur({},t[e.platformId]);return r.platformProductId=r.id,r.id=t.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));if(!r)return null;var n=Ur({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(e){var t,r=this;return(null===(t=this._options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.useBuiltInErrorPopup)?function(e){if(!document.getElementById("bridge-info-popup-styles")){var t=document.createElement("style");t.id="bridge-info-popup-styles",t.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(t)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(e){o.onclick=function(){n.style.display="none",r.style.display="none",e()},r.style.display="block",n.style.display="flex"}))}().then((function(){e?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(e?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var e=function(){var e,t="bridge_player_guest_id";try{e=localStorage.getItem(t)}catch(e){}if(!e){var r=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),n=Date.now().toString(36);e="".concat(r).concat(n);try{localStorage.setItem(t,e)}catch(e){}}return{id:e,name:"Guest ".concat(e)}}();this._playerId=e.id,this._playerName=e.name}}])&&Vr(r.prototype,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();H().mixin(Jr.prototype);const Kr=Jr;function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nn(n.key),n)}}function Qr(){return Qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Qr.apply(this,arguments)}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function rn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nn(e){var t=function(e,t){if("object"!=qr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qr(t)?t:String(t)}function on(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function an(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,sn(e,t,"get"))}function sn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var un=new WeakMap,cn=new WeakSet;function ln(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const fn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(p,t);var r,n,o,u,f=(o=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tn(o);if(u){var r=tn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}(this,e)});function p(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return rn(t=en(e=f.call.apply(f,[this].concat(o))),r=cn),r.add(t),function(e,t,r){(t=nn(t))in e?Object.defineProperty(e,t,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[t]=true}(en(e),"_isBannerSupported"),function(e,t,r){rn(e,t),t.set(e,{writable:!0,value:void 0})}(en(e),un),e}return r=p,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Qr(tn(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):Qr(tn(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(an(this,un)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return Qr(tn(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===an(this,un)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(y.INITIALIZE);if(!o){o=this._createPromiseDecorator(y.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=un,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,sn(t,r,"set"),n)),ye("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){ve("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=c.PLATFORM_INTERNAL,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Qr(tn(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Qr(tn(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):Qr(tn(p.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===c.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Qr(tn(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===c.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return Qr(tn(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:e}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return on(this,cn,ln).call(this,y.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():on(this,cn,ln).call(this,y.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),on(this,cn,ln).call(this,y.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?on(this,cn,ln).call(this,y.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return on(this,cn,ln).call(this,y.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(e){return on(this,cn,ln).call(this,y.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&Xr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Kr);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=mn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mn(n.key),n)}}function mn(e){var t=function(e,t){if("object"!=pn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pn(t)?t:String(t)}function vn(){return vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},vn.apply(this,arguments)}function _n(e,t){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_n(e,t)}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sn(e)}function bn(e,t,r){Pn(e,t),t.set(e,r)}function Pn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function En(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function wn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,On(e,t,"set"),r),r}function An(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,On(e,t,"get"))}function On(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var kn=new WeakMap,In=new WeakMap,Dn=new WeakMap,Tn=new WeakMap,Rn=new WeakSet;function Ln(){var e=this;return new Promise((function(t){var r=!1;e._options&&e._options.useSignedData&&(r=e._options.useSignedData),e._platformSdk.getPlayer({signed:r}).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized=t.isAuthorized(),e._defaultStorageType=e._isPlayerAuthorized?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE;var n=t.getName();""!==n&&(e._playerName=n),e._playerPhotos=[];var o=t.getPhoto("small"),i=t.getPhoto("medium"),a=t.getPhoto("large");return o&&e._playerPhotos.push(o),i&&e._playerPhotos.push(i),a&&e._playerPhotos.push(a),e._playerExtra={payingStatus:t.getPayingStatus()},r&&(e._playerExtra.signature=t.signature),wn(e,In,t),t.getData()})).then((function(t){e._platformStorageCachedData=t})).finally((function(){t()}))}))}const jn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_n(e,t)}(h,t);var r,n,o,u,p=(o=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sn(o);if(u){var r=Sn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gn(e)}(this,e)});function h(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Pn(t=gn(e=p.call.apply(p,[this].concat(o))),r=Rn),r.add(t),bn(gn(e),kn,{writable:!0,value:!1}),bn(gn(e),In,{writable:!0,value:null}),bn(gn(e),Dn,{writable:!0,value:null}),bn(gn(e),Tn,{writable:!0,value:null}),e}return r=h,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():vn(Sn(h.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():vn(Sn(h.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return vn(Sn(h.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return An(this,kn)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("/sdk.js").then((function(){ve("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t,wn(e,Tn,En(e,Rn,Ln).call(e));var n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.26.0-preview.1"}),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){wn(e,kn,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),u=e._platformSdk.getPayments().then((function(t){wn(e,Dn,t)}));e._isBannerSupported=!0;var c=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,a,u,c]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case f.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case f.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return vn(Sn(h.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(hn(hn({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var e=this,t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(wn(this,Tn,En(this,Rn,Ln).call(this)),An(this,Tn).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){wn(e,Tn,En(e,Rn,Ln).call(e)),An(e,Tn).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||vn(Sn(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:vn(Sn(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?An(this,Tn).then((function(){return new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}))})):Promise.reject():vn(Sn(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?An(this,Tn).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?hn({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;An(n,In).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}))})):Promise.reject():vn(Sn(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?An(this,Tn).then((function(){return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?hn({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];An(r,In).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}))})):Promise.reject():vn(Sn(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(y.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(y.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(y.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(y.RATE);return t||(t=this._createPromiseDecorator(y.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(y.RATE):e._rejectPromiseDecorator(y.RATE)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)})):e._rejectPromiseDecorator(y.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(e,t).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(e,n).then((function(e){var r;r=e&&e.entries.length>0?e.entries.map((function(e){return{id:e.player.uniqueID,name:e.player.publicName,score:e.score,rank:e.rank,photo:e.player.getAvatarSrc("large")}})):[],t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!An(this,Dn))return Promise.reject();var r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),An(this,Dn).purchase(r).then((function(r){var n=hn({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!An(this,Dn))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),An(this,Dn).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!An(this,Dn))return Promise.reject();var t=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),An(this,Dn).getCatalog().then((function(r){var n=t.map((function(e){var t,n=r.find((function(t){return t.id===e.id}));return{id:e.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(t=n.getPriceCurrencyImage)||void 0===t?void 0:t.call(n,"medium")}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!An(this,Dn))return Promise.reject();var t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),An(this,Dn).getPurchases().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=hn({id:r.find((function(t){return t.id===e.productID})).id},e.purchaseData);return delete t.productID,t})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(y.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(y.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(y.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(y.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(y.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(y.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(y.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(y.CLIPBOARD_WRITE,e)}))),r.promise}}])&&yn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(Kr);function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Nn(){Nn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(R([])));P&&P!==r&&n.call(P,a)&&(S=P);var E=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Cn(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Cn(t)+" is not iterable")}return _.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Bn(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Gn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Bn(i,n,o,a,s,"next",e)}function s(e){Bn(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=xn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xn(n.key),n)}}function xn(e){var t=function(e,t){if("object"!=Cn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cn(t)?t:String(t)}function Un(){return Un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Un.apply(this,arguments)}function Vn(e,t){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vn(e,t)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wn(e)}function Zn(e,t){Jn(e,t),t.add(e)}function Yn(e,t,r){Jn(e,t),t.set(e,r)}function Jn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function qn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Qn(e,t,"set"),r),r}function Xn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Qn(e,t,"get"))}function Qn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var $n="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",eo="https://store.xsolla.com/api/v2/project/",to=new WeakMap,ro=new WeakMap,no=new WeakMap,oo=new WeakSet,io=new WeakSet,ao=new WeakSet,so=new WeakSet;function uo(){var e=this;return Xn(this,ro)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){if(!n)return e._playerApplyGuestData(),void r();e._isPlayerAuthorized=!0,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),e._playerExtra=n,e._options.useUserToken?e._platformSdk.user.getUserToken().then((function(t){e._playerExtra.jwt=t})).finally((function(){t()})):t()})).catch((function(t){e._playerApplyGuestData(),r(t)}))})):(this._playerApplyGuestData(),Promise.reject())}function co(){return lo.apply(this,arguments)}function lo(){return(lo=Gn(Nn().mark((function e(){return Nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.XPayStationWidget){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ye($n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(){return po.apply(this,arguments)}function po(){return(po=Gn(Nn().mark((function e(){return Nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._platformSdk.user.getXsollaUserToken();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ho(e,t,r){return yo.apply(this,arguments)}function yo(){return(yo=Gn(Nn().mark((function e(t,r,n){var o;return Nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(eo,"/").concat(t,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const mo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vn(e,t)}(h,t);var r,n,o,p,d=(o=h,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wn(o);if(p){var r=Wn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zn(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zn(zn(e=d.call.apply(d,[this].concat(r))),so),Zn(zn(e),ao),Zn(zn(e),io),Zn(zn(e),oo),Yn(zn(e),to,{writable:!0,value:!1}),Yn(zn(e),ro,{writable:!0,value:!1}),Yn(zn(e),no,{writable:!0,value:{adStarted:function(){Xn(zn(e),to)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){Xn(zn(e),to)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){Xn(zn(e),to)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=h,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Xn(this,ro)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Un(Wn(h.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return Xn(this,ro)}},{key:"isPaymentsSupported",get:function(){return!0===Xn(this,ro)}},{key:"deviceType",get:function(){if(Xn(this,ro)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(e))return e}return Un(Wn(h.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){ve("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=c.PLATFORM_INTERNAL,e._isBannerSupported=!0,e._platformSdk.init().then((function(){qn(e,ro,e._platformSdk.user.isUserAccountAvailable);var t=Kn(e,oo,uo).call(e);e.options.xsollaProjectId&&Kn(e,io,co).call(e),Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!Xn(this,ro))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Kn(e,oo,uo).call(e).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case f.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case f.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Un(Wn(h.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Un(Wn(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Un(Wn(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):Un(Wn(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):Un(Wn(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):Un(Wn(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=me(e)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([u]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){qn(this,to,!1),this._platformSdk.ad.requestAd("midgame",Xn(this,no))}},{key:"showRewarded",value:function(){qn(this,to,!0),this._platformSdk.ad.requestAd("rewarded",Xn(this,no))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),Kn(this,io,co).call(this).then((function(){return Kn(t,ao,fo).call(t)})).then((function(e){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:e,sandbox:t.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var u=s.order_id||s.invoice;if(!u)return;Kn(t,so,ho).call(t,t.options.xsollaProjectId,u,e).then((function(e){t._platformSdk.analytics.trackOrder("xsolla",e);var o=Hn({id:r.id,sku:n,orderId:u},e);t._paymentsPurchases.push(o),i||(i=!0,t._resolvePromiseDecorator(y.PURCHASE,o))})).catch((function(e){i||t._rejectPromiseDecorator(y.PURCHASE,e)}))}}catch(e){i||t._rejectPromiseDecorator(y.PURCHASE,e)}})),o.on("close",(function(){i||t._rejectPromiseDecorator(y.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),Kn(this,ao,fo).call(this).then((function(t){return fetch("".concat(eo,"/").concat(e.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla catalog HTTP ".concat(e.status));return e.json()})).then((function(r){var n=new Map((r.items||[]).map((function(e){return[e.sku,e]}))),o=t.map((function(e){var t,r,o,i,a,s,u,c,l,f,p=e.platformProductId||e.id,d=n.get(p);return{id:e.id,name:null!==(t=null!==(r=null==d?void 0:d.name)&&void 0!==r?r:e.name)&&void 0!==t?t:e.id,description:null!==(o=null!==(i=null==d?void 0:d.description)&&void 0!==i?i:e.description)&&void 0!==o?o:"",price:null!==(a=null==d||null===(s=d.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(u=null==d||null===(c=d.price)||void 0===c?void 0:c.currency)&&void 0!==u?u:null,priceValue:null!==(l=null==d||null===(f=d.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));e._resolvePromiseDecorator(y.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(y.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(y.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})}catch(e){this._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),Kn(this,ao,fo).call(this).then((function(t){return fetch("".concat(eo,"/").concat(e.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla inventory HTTP ".concat(e.status));return e.json()})).then((function(t){var r=e._paymentsGetProductsPlatformData()||[];e._paymentsPurchases=(t.items||[]).map((function(e){var t=r.find((function(t){return t.id===e.sku}));return t?Hn({id:t.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}}])&&Fn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(Kr);function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}function _o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=bo(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function So(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bo(n.key),n)}}function bo(e){var t=function(e,t){if("object"!=vo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=vo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vo(t)?t:String(t)}function Po(){return Po="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ao(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Po.apply(this,arguments)}function Eo(e,t){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Eo(e,t)}function wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ao(e)}var Oo=new WeakSet;function ko(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const Io=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ao(o);if(s){var r=Ao(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wo(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=wo(e=u.call.apply(u,[this].concat(o))),r=Oo),r.add(t),e}return r=l,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Oo,ko).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE,e._resolvePromiseDecorator(y.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Po(Ao(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Po(Ao(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):Po(Ao(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?go({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):Po(Ao(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?go({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):Po(Ao(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&So(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function Do(e){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(e)}function To(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ro(n.key),n)}}function Ro(e){var t=function(e,t){if("object"!=Do(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Do(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Do(t)?t:String(t)}function Lo(e,t){return Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lo(e,t)}function jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Co(e)}function No(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Go(e,t,"set"),r),r}function Bo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Go(e,t,"get"))}function Go(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Mo=new WeakMap;const Ho=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lo(e,t)}(p,t);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Co(o);if(l){var r=Co(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=jo(e=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Mo),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(y.INITIALIZE);break;case"SDK_GAME_START":Bo(t,Mo)?(t._setRewardedState(a.CLOSED),t._platformSdk.preloadAd("rewarded")):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Bo(t,Mo)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=c.LOCAL_STORAGE,this._isBannerSupported=!0,ye("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(y.INITIALIZE,g);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=me(e)),r.style.display="block",this._platformSdk.showAd("display",{containerId:u}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;No(this,Mo,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var e=this;No(this,Mo,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&To(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Kr);function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qo(n.key),n)}}function Uo(){return Uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Uo.apply(this,arguments)}function Vo(e,t){return Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vo(e,t)}function zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e){return Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wo(e)}function Zo(e,t){Jo(e,t),t.add(e)}function Yo(e,t,r){Jo(e,t),t.set(e,r)}function Jo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ko(e,t,r){return(t=qo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qo(e){var t=function(e,t){if("object"!=Fo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fo(t)?t:String(t)}function Xo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Qo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,$o(e,t,"get"))}function $o(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ei="AUTHORIZED",ti={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},ri=new WeakMap,ni=new WeakMap,oi=new WeakMap,ii=new WeakMap,ai=new WeakSet,si=new WeakSet,ui=new WeakSet,ci=new WeakSet,li=new WeakSet,fi=new WeakSet,pi=new WeakSet,di=new WeakSet,hi=new WeakSet,yi=new WeakSet,mi=new WeakSet,vi=new WeakSet,_i=new WeakSet,gi=new WeakSet,Si=new WeakSet,bi=new WeakSet;function Pi(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function Ei(){var e=this;return{userProfileCallback:function(t,r,n){return Xo(e,ai,Ai).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return Xo(e,ui,ki).call(e,r,n)}}}function wi(){var e=this;return{showPermissions:function(){return Xo(e,ci,Ii).call(e)},loadAd:function(t){return Xo(e,li,Di).call(e,t)},showLoadedAd:function(t,r){return Xo(e,fi,Ti).call(e,r)},showAd:function(t,r){return Xo(e,pi,Ri).call(e,r)},requestBannerAds:function(t,r){return Xo(e,di,Li).call(e,t,r)},showBannerAds:function(t,r){return Xo(e,yi,Ci).call(e,r)},hideBannerAds:function(t,r){return Xo(e,hi,ji).call(e,r)},setBannerFormat:function(t){return Xo(e,mi,Ni).call(e,t)},showInvite:function(t){return Xo(e,vi,Bi).call(e,t)},showRatingDialog:function(t,r){return Xo(e,_i,Gi).call(e,t,r)},joinGroup:function(t,r){return Xo(e,gi,Mi).call(e,t,r)},showLoginSuggestion:function(t,r){return Xo(e,si,Oi).call(e,t,r)},postMediatopic:function(t,r){return Xo(e,Si,Hi).call(e,t,r)},isAdBlockEnabled:function(t,r){return Xo(e,bi,Fi).call(e,t,r)}}}function Ai(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(Qo(this,ni).hasAppPermission(ti.VALUABLE_ACCESS),Qo(this,oi).hasValueAccessCallback)}function Oi(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}function ki(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?c.PLATFORM_INTERNAL:c.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(y.INITIALIZE);else{var t=Object.values(ti).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function Ii(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(Qo(this,ni).hasAppPermission(ti.VALUABLE_ACCESS),Qo(this,oi).hasValueAccessCallback)}function Di(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Ti(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Ri(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Li(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",Qo(this,ri));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function ji(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Ci(e){e||this._setBannerState(s.FAILED)}function Ni(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Bi(e){"error"===e?this._rejectPromiseDecorator(y.INVITE_FRIENDS):this._resolvePromiseDecorator(y.INVITE_FRIENDS)}function Gi(e,t){"error"===e?this._rejectPromiseDecorator(y.RATE,t):this._resolvePromiseDecorator(y.RATE)}function Mi(e,t){"error"===e?this._rejectPromiseDecorator(y.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(y.JOIN_COMMUNITY)}function Hi(e,t){"error"===e?this._rejectPromiseDecorator(y.CREATE_POST,t):this._resolvePromiseDecorator(y.CREATE_POST)}function Fi(e,t){"ok"===e?this._resolvePromiseDecorator(y.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(y.ADBLOCK_DETECT)}const xi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wo(o);if(s){var r=Wo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Fo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zo(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zo(zo(e=u.call.apply(u,[this].concat(r))),bi),Zo(zo(e),Si),Zo(zo(e),gi),Zo(zo(e),_i),Zo(zo(e),vi),Zo(zo(e),mi),Zo(zo(e),yi),Zo(zo(e),hi),Zo(zo(e),di),Zo(zo(e),pi),Zo(zo(e),fi),Zo(zo(e),li),Zo(zo(e),ci),Zo(zo(e),ui),Zo(zo(e),si),Zo(zo(e),ai),Yo(zo(e),ii,{get:wi,set:void 0}),Yo(zo(e),oi,{get:Ei,set:void 0}),Yo(zo(e),ni,{get:Pi,set:void 0}),Ko(zo(e),"_hasValuableAccessPermission",!1),Ko(zo(e),"_hasValuableAccessPermissionShowed",!1),Ko(zo(e),"_platformBannerOptions",{}),Yo(zo(e),ri,{writable:!0,value:null}),e}return r=l,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("//api.ok.ru/js/fapi5.js").then((function(){ve("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return Qo(e,ii)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===ei,e._isPlayerAuthorized?e._platformSdk.Client.call(Qo(e,ni).userProfile,Qo(e,oi).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE))}),(function(){e._rejectPromiseDecorator(y.INITIALIZE)})):e._rejectPromiseDecorator(y.INITIALIZE,b)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(ei)),e.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Uo(Wo(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Uo(Wo(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var u=a.data||{};if(Array.isArray(e)){var c=[];return i.forEach((function(e){if(""!==u[e]&&void 0!==u[e]){var t=u[e];if(r)try{t=JSON.parse(u[e])}catch(e){}c.push(t)}else c.push(null)})),void t(c)}if(""===u[e]||void 0===u[e])return void t(null);var l=u[e];if(r)try{l=JSON.parse(u[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(_):Uo(Wo(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===c.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[u],t=i[u];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},u=0;u<o.length;u++)s();return Promise.all(a)}return Uo(Wo(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===c.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Uo(Wo(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,$o(t,ri,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(y.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(y.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(y.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(y.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(y.INVITE_FRIENDS,A):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(y.RATE);return e||(e=this._createPromiseDecorator(y.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(y.CREATE_POST);return r||(r=this._createPromiseDecorator(y.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(y.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(y.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&xo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Vi(){Vi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(R([])));P&&P!==r&&n.call(P,a)&&(S=P);var E=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ui(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ui(t)+" is not iterable")}return _.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function zi(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ji(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ji(n.key),n)}}function Ji(e){var t=function(e,t){if("object"!=Ui(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ui(t)?t:String(t)}function Ki(){return Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ki.apply(this,arguments)}function qi(e,t){return qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qi(e,t)}function Xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qi(e){return Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qi(e)}function $i(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ea(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var ta=new WeakSet,ra=new WeakSet;function na(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return t.isAuthorized?(e._isPlayerAuthorized=!0,e._playerId=t.id,e._playerName=t.name,e._playerPhotos=t.photos,e._playerExtra=t,e._defaultStorageType=c.PLATFORM_INTERNAL,ea(e,ra,oa).call(e,[])):(e._playerApplyGuestData(),Promise.resolve())})).catch((function(){e._playerApplyGuestData()})).finally((function(){t()}))}))}function oa(e){return ia.apply(this,arguments)}function ia(){var e;return e=Vi().mark((function e(t){var r,n=arguments;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",Se(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),ia=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){zi(i,n,o,a,s,"next",e)}function s(e){zi(i,n,o,a,s,"throw",e)}a(void 0)}))},ia.apply(this,arguments)}const aa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qi(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qi(o);if(s){var r=Qi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return $i(Xi(e=u.call.apply(u,[this].concat(r))),ra),$i(Xi(e),ta),e}return r=l,(n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||Ki(Qi(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://developer.playgama.com/sdk/v1.js").then((function(){ve("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,ea(e,ta,na).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Ki(Qi(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ki(Qi(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===c.PLATFORM_INTERNAL?this._isPlayerAuthorized?ea(this,ra,oa).call(this,e,r):Promise.reject():Ki(Qi(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case c.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Zi({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case c.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),Ki(Qi(l.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(v)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case c.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Zi({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case c.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),Ki(Qi(l.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(v)}}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._isPlayerAuthorized?ea(this,ta,na).call(this,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){ea(t,ta,na).call(t,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(t){if("PAID"===t.status){var n=Zi({id:e},t);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(y.PURCHASE,n)}else r._rejectPromiseDecorator(y.PURCHASE,t.error)})).catch((function(e){r._rejectPromiseDecorator(y.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));return Promise.resolve(t)}}])&&Yi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ya(n.key),n)}}function la(){return la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=da(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},la.apply(this,arguments)}function fa(e,t){return fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fa(e,t)}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function da(e){return da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},da(e)}function ha(e,t,r){return(t=ya(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ya(e){var t=function(e,t){if("object"!=sa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sa(t)?t:String(t)}function ma(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function va(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ga(e,t,"set"),r),r}function _a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ga(e,t,"get"))}function ga(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Sa=new WeakMap,ba=new WeakMap;const Pa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fa(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=da(o);if(s){var r=da(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pa(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ma(pa(e=u.call.apply(u,[this].concat(r))),Sa,{writable:!0,value:void 0}),ma(pa(e),ba,{writable:!0,value:void 0}),ha(pa(e),"_defaultStorageType",c.PLATFORM_INTERNAL),ha(pa(e),"_isPlayerAuthorized",!0),e}return r=l,n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return _a(this,Sa)?_a(this,Sa):la(da(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,va(e,Sa,i.locale),va(e,ba,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case f.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return la(da(l.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||la(da(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||la(da(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===c.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):la(da(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===c.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):la(da(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===c.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):la(da(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){var e=this,t=this._getPromiseDecorator(y.SHARE);return t||(t=this._createPromiseDecorator(y.SHARE),window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",t),e._resolvePromiseDecorator(y.SHARE))})),window.parent.postMessage({playdeck:{method:"customShare",value:_a(this,ba)}},"*")),t.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function t(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",t);var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){ha(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(y.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",t),r._rejectPromiseDecorator(y.PURCHASE,i.value))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Stars"),priceCurrencyCode:"Stars",priceValue:e.amount}}));return Promise.resolve(t)}}],n&&ca(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ra(n.key),n)}}function Aa(){return Aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ia(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Aa.apply(this,arguments)}function Oa(e,t){return Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oa(e,t)}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ia(e)}function Da(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ta(e,t,r){return(t=Ra(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ra(e){var t=function(e,t){if("object"!=Ea(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ea(t)?t:String(t)}function La(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ca(e,t,"set"),r),r}function ja(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ca(e,t,"get"))}function Ca(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Na=new WeakMap,Ba=new WeakMap,Ga=new WeakMap,Ma=new WeakMap;const Ha=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oa(e,t)}(p,t);var r,n,o,s,u=(o=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ia(o);if(s){var r=Ia(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ka(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ta(ka(e=u.call.apply(u,[this].concat(r))),"_defaultStorageType",c.PLATFORM_INTERNAL),Ta(ka(e),"_isPlayerAuthorized",!0),Da(ka(e),Na,{writable:!0,value:void 0}),Da(ka(e),Ba,{writable:!0,value:void 0}),Da(ka(e),Ga,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),Da(ka(e),Ma,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=p,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:Aa(Ia(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!ja(this,Ba)}},{key:"isRewardedSupported",get:function(){return!!ja(this,Ba)}},{key:"deviceType",get:function(){switch(ja(this,Na)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return Aa(Ia(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],La(e,Na,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?ye("https://sad.adsgram.ai/js/sad.min.js").then((function(){La(e,Ba,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(y.INITIALIZE)})):e._resolvePromiseDecorator(y.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):Aa(Ia(p.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Aa(Ia(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Aa(Ia(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):Aa(Ia(p.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):Aa(Ia(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):Aa(Ia(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;ja(this,Ba)?(ja(this,Ba).addEventListener("onStart",ja(this,Ma).onStart),ja(this,Ba).addEventListener("onSkip",ja(this,Ma).onSkip),ja(this,Ba).addEventListener("onError",ja(this,Ma).onError),ja(this,Ba).addEventListener("onBannerNotFound",ja(this,Ma).onError),ja(this,Ba).show().finally((function(){ja(e,Ba).removeEventListener("onStart",ja(e,Ma).onStart),ja(e,Ba).removeEventListener("onSkip",ja(e,Ma).onSkip),ja(e,Ba).removeEventListener("onError",ja(e,Ma).onError),ja(e,Ba).removeEventListener("onBannerNotFound",ja(e,Ma).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;ja(this,Ba)?(ja(this,Ba).addEventListener("onStart",ja(this,Ga).onStart),ja(this,Ba).addEventListener("onSkip",ja(this,Ga).onSkip),ja(this,Ba).addEventListener("onReward",ja(this,Ga).onReward),ja(this,Ba).addEventListener("onError",ja(this,Ga).onError),ja(this,Ba).addEventListener("onBannerNotFound",ja(this,Ga).onError),ja(this,Ba).show().finally((function(){ja(e,Ba).addEventListener("onStart",ja(e,Ga).onStart),ja(e,Ba).addEventListener("onSkip",ja(e,Ga).onSkip),ja(e,Ba).addEventListener("onReward",ja(e,Ga).onReward),ja(e,Ba).addEventListener("onError",ja(e,Ga).onError),ja(e,Ba).addEventListener("onBannerNotFound",ja(e,Ga).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(y.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(y.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(y.CLIPBOARD_READ,t):e._rejectPromiseDecorator(y.CLIPBOARD_READ)}))),t.promise}}])&&wa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Kr);var Fa=["player"];function xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Wa(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wa(n.key),n)}}function Wa(e){var t=function(e,t){if("object"!=Va(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Va(t)?t:String(t)}function Za(){return Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ka(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Za.apply(this,arguments)}function Ya(e,t){return Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ya(e,t)}function Ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e){return Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ka(e)}function qa(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Xa(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Qa="userData",$a="6129580795478709",es=new WeakSet,ts=new WeakSet;function rs(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:Qa},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function ns(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=c.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var u=s.thumb_url,l=s.medium_url,f=s.large_url;u&&this._playerPhotos.push(u),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const os=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ya(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ka(o);if(s){var r=Ka(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ja(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qa(Ja(e=u.call.apply(u,[this].concat(r))),ts),qa(Ja(e),es),e}return r=l,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return d}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?ye("https://cdn.y8.com/api/sdk.js").then((function(){ve("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,n,o,i,a;(t={hostId:"ca-host-pub-".concat($a),adsenseId:e._options.channelId?"ca-pub-".concat($a):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,n=t.adsenseId,o=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",n),o?t.setAttribute("data-ad-channel",o):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){Xa(e,ts,ns).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(y.INITIALIZE,S)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){Xa(e,ts,ns).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Za(Ka(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:Za(Ka(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){Xa(n,es,rs).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==Va(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):Za(Ka(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){Xa(n,es,rs).call(n).then((function(i){var a=Ua({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:Qa,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):Za(Ka(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){Xa(r,es,rs).call(r).then((function(o){var i=Ua({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:Qa,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):Za(Ka(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={table:e,points:t};this._platformSdk.GameAPI.Leaderboards.save(o,(function(e){var t=e.success,n=e.errormessage;t?r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var n={table:e,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(e){var r=e.scores,n=e.success,o=e.errormessage;if(n){var i=r.map((function(e){return{id:e.playerid,name:e.playername,score:e.points,rank:e.rank,photo:null}}));t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,i)}else t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return Ua(Ua({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Fa)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&za(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function as(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ss(n.key),n)}}function ss(e){var t=function(e,t){if("object"!=is(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=is(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==is(t)?t:String(t)}function us(){return us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ls(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},us.apply(this,arguments)}function cs(e,t){return cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cs(e,t)}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(e)}const fs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cs(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ls(o);if(s){var r=ls(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?ye("https://lagged.com/api/rev-share/lagged.js").then((function(){ve("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))})):this._rejectPromiseDecorator(y.INITIALIZE,P)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==c.PLATFORM_INTERNAL&&us(ls(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==c.PLATFORM_INTERNAL&&us(ls(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={score:t,board:e};this._platformSdk.Scores.save(o,(function(e){e.success?r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&as(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function ps(){ps=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(R([])));P&&P!==r&&n.call(P,a)&&(S=P);var E=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==ms(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ms(t)+" is not iterable")}return _.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ds(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(r),!0).forEach((function(t){As(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ms(e){return ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(e)}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Os(n.key),n)}}function gs(){return gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ps(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},gs.apply(this,arguments)}function Ss(e,t){return Ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ss(e,t)}function bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ps(e){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ps(e)}function Es(e,t){ws(e,t),t.add(e)}function ws(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function As(e,t,r){return(t=Os(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Os(e){var t=function(e,t){if("object"!=ms(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ms(t)?t:String(t)}function ks(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Is(e,t,"set"),r),r}function Is(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Ds(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ts=new WeakMap,Rs=new WeakSet,Ls=new WeakSet,js=new WeakSet,Cs=new WeakSet;function Ns(){var e=this;e._platformSdk.overlayViews.setCustomEventHandler((function(t){if("leaderboard"===t)ks(e,Ts,!0);else if("close"===t){if(function(e,t){return t.get?t.get.call(e):t.value}(r=e,Is(r,Ts,"get")))return void ks(e,Ts,!1);e._overlay&&(document.body.removeChild(document.getElementById(e._overlay.iframeElement.id)),e._overlay.dismissAsync(),e._overlay=null)}var r}))}function Bs(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function Gs(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}function Ms(){return Hs.apply(this,arguments)}function Hs(){var e;return e=ps().mark((function e(){return ps().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),"INVALID_OPERATION"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=13;break}e.next=14;break;case 13:throw new Error(e.t0);case 14:return e.prev=15,e.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!e.sent){e.next=21;break}return e.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:e.next=28;break;case 23:if(e.prev=23,e.t1=e.catch(15),"INVALID_OPERATION"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=27;break}return e.abrupt("return",Promise.resolve());case 27:throw new Error(e.t1);case 28:return e.abrupt("return",Promise.resolve());case 29:case"end":return e.stop()}}),e,this,[[0,8],[15,23]])})),Hs=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ds(i,n,o,a,s,"next",e)}function s(e){ds(i,n,o,a,s,"throw",e)}a(void 0)}))},Hs.apply(this,arguments)}const Fs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ss(e,t)}(d,t);var r,n,o,u,p=(o=d,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ps(o);if(u){var r=Ps(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bs(e)}(this,e)});function d(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Es(bs(e=p.call.apply(p,[this].concat(i))),Cs),Es(bs(e),js),Es(bs(e),Ls),Es(bs(e),Rs),As(bs(e),"_contextId",null),As(bs(e),"_supportedApis",[]),As(bs(e),"_preloadedInterstitialPromises",{}),As(bs(e),"_preloadedRewardedPromises",{}),As(bs(e),"_defaultStorageType",c.PLATFORM_INTERNAL),As(bs(e),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},ws(t=bs(e),r=Ts),r.set(t,n),e}return r=d,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||gs(Ps(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return gs(Ps(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return"native_popup"}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return ve("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){return e._isPlayerAuthorized=!0,e._playerId=e._platformSdk.player.getID(),e._contextId=e._platformSdk.context.getID(),e._platformLanguage=e._platformSdk.getLocale(),"string"==typeof e._platformLanguage&&(e._platformLanguage=e._platformLanguage.substring(0,2).toLowerCase()),e._supportedApis=e._platformSdk.getSupportedAPIs(),Ds(e,Rs,Ns).call(e),Promise.allSettled([e._platformSdk.community.canFollowOfficialPageAsync(),e._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(r,n)||function(e,t){if(e){if("string"==typeof e)return vs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vs(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,u="fulfilled"===a.status&&a.value;e._isJoinCommunitySupported=!0===s&&!0===u}))})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){return e._rejectPromiseDecorator(y.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===f.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return Ds(t,Cs,Ms).call(t)}),0),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):gs(Ps(d.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):gs(Ps(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL?this._isPlayerAuthorized:gs(Ps(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==ms(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):gs(Ps(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):gs(Ps(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):gs(Ps(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e,t){var r=this;this._platformSdk.loadBannerAdAsync(t,e).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(e){Ds(this,Ls,Bs).call(this,e)}},{key:"showInterstitial",value:function(e){var t=this;Ds(this,Ls,Bs).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!1)})).finally((function(){Ds(t,Ls,Bs).call(t,e,!0)}))}},{key:"preloadRewarded",value:function(e){Ds(this,js,Gs).call(this,e)}},{key:"showRewarded",value:function(e){var t=this;Ds(this,js,Gs).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!0)})).finally((function(){Ds(t,js,Gs).call(t,e,!0)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.globalLeaderboards.setScoreAsync(e,o).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="9999",e.id="loading-overlay";var t=document.createElement("div");return t.style.fontSize="24px",t.style.color="#fff",t.innerText="Loading...",e.appendChild(t),e}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(e,20).then((function(e){var r=e.map((function(e){return{score:e.getScore(),sessionID:e.getPlayer().getSessionID()}})),o=t._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(e){e.showAsync(),t._overlay=e,n.remove(),t._resolvePromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(e,r){n.remove(),t._rejectPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(e){n.remove(),t._rejectPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=ys({id:e},r);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=t.map((function(e){var t=r.find((function(t){return t.productID===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,imageURI:t.imageURI,price:t.price,priceCurrencyCode:t.priceCurrencyCode,priceValue:t.priceAmount}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=ys({id:r.find((function(t){return t.id===e.productID})).id},e);return delete t.productID,t})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!_e(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(y.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(y.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(y.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(y.INVITE_FRIENDS,t)}))),r.promise}},{key:"joinCommunity",value:function(e){var t=this,r=this._getPromiseDecorator(y.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(y.JOIN_COMMUNITY),e&&!0===e.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(e){return t._resolvePromiseDecorator(y.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(y.JOIN_COMMUNITY,e)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(e){return t._resolvePromiseDecorator(y.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(y.JOIN_COMMUNITY,e)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!_e(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(y.SHARE);return r||(r=this._createPromiseDecorator(y.SHARE),this._platformSdk.shareAsync(ys({intent:"REQUEST"},e)).then((function(){t._resolvePromiseDecorator(y.SHARE)})).catch((function(e){t._rejectPromiseDecorator(y.SHARE,e)}))),r.promise}}],n&&_s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Kr);function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vs(n.key),n)}}function Vs(e){var t=function(e,t){if("object"!=xs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xs(t)?t:String(t)}var zs,Ws=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Us(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ys(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(r),!0).forEach((function(t){nu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Js(e){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(e)}function Ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ou(n.key),n)}}function Xs(e,t){return Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xs(e,t)}function Qs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $s(e,t){ru(e,t),t.add(e)}function eu(){return eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},eu.apply(this,arguments)}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tu(e)}function ru(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nu(e,t,r){return(t=ou(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ou(e){var t=function(e,t){if("object"!=Js(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Js(t)?t:String(t)}function iu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function au(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var su="banner",uu="get_data_from_storage",cu="get_server_time",lu="clipboard_read",fu="unlock_achievement",pu="get_achievements",du="get_performance_resources",hu="isLocalStorageSupported",yu="isPlatformInternalStorageSupported",mu="isBannerSupported",vu=new WeakMap,_u=new WeakSet,gu=new WeakSet,Su=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xs(e,t)}(m,r);var n,o,u,l,d=(u=m,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tu(u);if(l){var r=tu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Js(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qs(e)}(this,e)});function m(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return $s(Qs(e=d.call.apply(d,[this].concat(i))),gu),$s(Qs(e),_u),nu(Qs(e),"_supportedFeatures",[]),nu(Qs(e),"_leaderboardsType",null),t=Qs(e),r=vu,n={writable:!0,value:new Ws},ru(t,r),r.set(t,n),e}return n=m,(o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return au(this,vu).send({type:t.PLATFORM,action:"get_language",options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(mu)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var e;return null!==(e=this._leaderboardsType)&&void 0!==e?e:p}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),this._defaultStorageType=c.PLATFORM_INTERNAL,au(this,vu).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===y.INITIALIZE&&iu(e,_u,bu).call(e,n),n.action===du)){var o,i=au(e,vu).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];iu(e,gu,Pu).call(e,i,a)}})),au(this,vu).send({type:t.PLATFORM,action:y.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(e){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);if(!n){n=this._createPromiseDecorator(y.AUTHORIZE_PLAYER);var o=au(this,vu).generateMessageId();au(this,vu).addListener((function e(n){var i,a=n.data;if((null==a?void 0:a.type)===t.PLAYER&&a.action===y.AUTHORIZE_PLAYER&&a.id===o){var s=a.player,u=a.auth;"success"===u.status?(r._playerId=s.userId,r._isPlayerAuthorized=s.isAuthorized,r._playerName=s.name,Array.isArray(s.photos)&&(r._playerPhotos=function(e){if(Array.isArray(e))return Ks(e)}(i=s.photos)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Ks(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ks(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=s,r._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)):r._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,u.error),au(r,vu).removeListener(e)}})),au(this,vu).send({type:t.PLAYER,action:y.AUTHORIZE_PLAYER,id:o,options:e})}return n.promise}},{key:"sendMessage",value:function(e){return[f.GAME_READY,f.IN_GAME_LOADING_STARTED,f.IN_GAME_LOADING_STOPPED,f.GAMEPLAY_STARTED,f.GAMEPLAY_STOPPED,f.PLAYER_GOT_ACHIEVEMENT,f.GAME_OVER].includes(e)?(au(this,vu).send({type:t.PLATFORM,action:e}),Promise.resolve()):eu(tu(m.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=au(e,vu).generateMessageId(),a=function a(s){var u=s.data;if((null==u?void 0:u.type)===t.PLATFORM&&u.action===cu&&u.id===i){if(!u.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(u.time),au(e,vu).removeListener(a)}};au(e,vu).addListener(a),au(e,vu).send({type:t.PLATFORM,action:cu,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),au(e,vu).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return au(this,vu).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==c.PLATFORM_INTERNAL||!this._supportedFeatures.includes(yu))||!(e!==c.LOCAL_STORAGE||!this._supportedFeatures.includes(hu))}},{key:"isStorageAvailable",value:function(e){return au(this,vu).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==c.PLATFORM_INTERNAL||!this._supportedFeatures.includes(yu))||!(e!==c.LOCAL_STORAGE||!this._supportedFeatures.includes(hu))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(!this.isStorageSupported(r))return Promise.reject(v);if(r===c.PLATFORM_INTERNAL||r===c.LOCAL_STORAGE){var i=au(this,vu).generateMessageId();return new Promise((function(a){au(o,vu).addListener((function r(n){var s=n.data;(null==s?void 0:s.type)===t.STORAGE&&s.action===uu&&s.id===i&&(Array.isArray(e)?a(e.map((function(e){return s.storage[e]}))):a(s.storage[e]),au(o,vu).removeListener(r))})),au(o,vu).send({type:t.STORAGE,action:uu,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return au(this,vu).send({type:t.STORAGE,action:uu,options:{key:e,storageType:r,tryParseJson:n}}),eu(tu(m.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return au(this,vu).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),this.isStorageSupported(n)?n===c.PLATFORM_INTERNAL||n===c.LOCAL_STORAGE?Promise.resolve():eu(tu(m.prototype),"setDataToStorage",this).call(this,e,r,n):Promise.reject(v)}},{key:"deleteDataFromStorage",value:function(e,r){return au(this,vu).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),this.isStorageSupported(r)?r===c.PLATFORM_INTERNAL||r===c.LOCAL_STORAGE?Promise.resolve():eu(tu(m.prototype),"deleteDataFromStorage",this).call(this,e,r):Promise.reject(v)}},{key:"showInterstitial",value:function(e){var r=this;this.isInterstitialSupported&&(au(this,vu).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setInterstitialState(i.LOADING);break;case"open":r._setInterstitialState(i.OPENED);break;case"failed":r._setInterstitialState(i.FAILED);break;case"close":r._setInterstitialState(i.CLOSED),au(r,vu).removeListener(e)}})),au(this,vu).send({type:t.ADVERTISEMENT,action:"interstitial",options:{placement:e}}))}},{key:"showRewarded",value:function(e){var r=this;this.isRewardedSupported&&(au(this,vu).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setRewardedState(a.LOADING);break;case"open":r._setRewardedState(a.OPENED);break;case"failed":r._setRewardedState(a.FAILED);break;case"rewarded":r._setRewardedState(a.REWARDED);break;case"close":r._setRewardedState(a.CLOSED),au(r,vu).removeListener(e)}})),au(this,vu).send({type:t.ADVERTISEMENT,action:"reward",options:{placement:e}}))}},{key:"showBanner",value:function(e,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),au(this,vu).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:su,position:e,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),au(this,vu).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:su}}))}},{key:"checkAdBlock",value:function(){return au(this,vu).send({type:"check_adblock",action:y.ADBLOCK_DETECT}),eu(tu(m.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var e=this._getPromiseDecorator(y.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(y.INVITE_FRIENDS),this._resolvePromiseDecorator(y.INVITE_FRIENDS),au(this,vu).send({type:t.SOCIAL,action:y.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var e=this._getPromiseDecorator(y.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(y.JOIN_COMMUNITY),this._resolvePromiseDecorator(y.JOIN_COMMUNITY),au(this,vu).send({type:t.SOCIAL,action:y.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var e=this._getPromiseDecorator(y.SHARE);return e||(e=this._createPromiseDecorator(y.SHARE),this._resolvePromiseDecorator(y.SHARE),au(this,vu).send({type:t.SOCIAL,action:y.SHARE})),e.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var e=this._getPromiseDecorator(y.CREATE_POST);return e||(e=this._createPromiseDecorator(y.CREATE_POST),this._resolvePromiseDecorator(y.CREATE_POST),au(this,vu).send({type:t.SOCIAL,action:y.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(y.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(y.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(y.ADD_TO_HOME_SCREEN),au(this,vu).send({type:t.SOCIAL,action:y.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var e=this._getPromiseDecorator(y.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(y.ADD_TO_FAVORITES),this._resolvePromiseDecorator(y.ADD_TO_FAVORITES),au(this,vu).send({type:t.SOCIAL,action:y.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var e=this._getPromiseDecorator(y.RATE);return e||(e=this._createPromiseDecorator(y.RATE),this._resolvePromiseDecorator(y.RATE),au(this,vu).send({type:t.SOCIAL,action:y.RATE})),e.promise}},{key:"paymentsPurchase",value:function(e){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();var o=this._getPromiseDecorator(y.PURCHASE);if(!o){o=this._createPromiseDecorator(y.PURCHASE);var i=au(this,vu).generateMessageId();au(this,vu).addListener((function n(o){var a=o.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===y.PURCHASE&&a.id===i){var s;if(!a.purchase||"object"!==Js(a.purchase))return r._rejectPromiseDecorator(y.PURCHASE,new Error("Invalid purchase")),void au(r,vu).removeListener(n);if(null!==(s=a.purchase)&&void 0!==s&&s.status){var u=Ys({id:e},a.purchase.purchaseData);delete u.commonId,r._paymentsPurchases.push(u),r._resolvePromiseDecorator(y.PURCHASE,u)}else{var c;r._rejectPromiseDecorator(y.PURCHASE,(null===(c=a.purchase)||void 0===c?void 0:c.error)||new Error("Unknown purchase error"))}au(r,vu).removeListener(n)}})),au(this,vu).send({type:t.PAYMENTS,action:y.PURCHASE,id:i,options:{product:n}})}return o.promise}},{key:"paymentsConsumePurchase",value:function(e){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(y.CONSUME_PURCHASE);if(!o){o=this._createPromiseDecorator(y.CONSUME_PURCHASE);var i=au(this,vu).generateMessageId();au(this,vu).addListener((function o(a){var s=a.data;if((null==s?void 0:s.type)===t.PAYMENTS&&s.action===y.CONSUME_PURCHASE&&s.id===i){var u;if(!s.purchase||"object"!==Js(s.purchase))return r._rejectPromiseDecorator(y.CONSUME_PURCHASE,new Error("Invalid purchase")),void au(r,vu).removeListener(o);if(null!==(u=s.purchase)&&void 0!==u&&u.status){var c=Ys({id:e},s.purchase);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(y.CONSUME_PURCHASE,c)}else{var l;r._rejectPromiseDecorator(y.CONSUME_PURCHASE,(null===(l=s.purchase)||void 0===l?void 0:l.error)||new Error("Unknown consume purchase error"))}au(r,vu).removeListener(o)}})),au(this,vu).send({type:t.PAYMENTS,action:y.CONSUME_PURCHASE,id:i,options:{product:this._paymentsPurchases[n]}})}return o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);if(!r){r=this._createPromiseDecorator(y.GET_CATALOG);var n=this._paymentsGetProductsPlatformData(),o=au(this,vu).generateMessageId();au(this,vu).addListener((function r(i){var a=i.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===y.GET_CATALOG&&a.id===o){var s=n.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));au(e,vu).removeListener(r),e._resolvePromiseDecorator(y.GET_CATALOG,s)}})),au(this,vu).send({type:t.PAYMENTS,action:y.GET_CATALOG,id:o})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(y.GET_PURCHASES);var n=au(this,vu).generateMessageId();au(this,vu).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===y.GET_PURCHASES&&i.id===n){var a=e._paymentsGetProductsPlatformData();e._paymentsPurchases=i.purchases.map((function(e){return Ys({id:a.find((function(t){return t.id===e.id})).id},e.purchaseData)})),au(e,vu).removeListener(r),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)}})),au(this,vu).send({type:t.PAYMENTS,action:y.GET_PURCHASES,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(y.GET_REMOTE_CONFIG);var n=au(this,vu).generateMessageId();au(this,vu).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===y.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(y.GET_REMOTE_CONFIG,i.result),au(e,vu).removeListener(r))})),au(this,vu).send({type:t.REMOTE_CONFIG,action:y.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(y.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(y.CLIPBOARD_WRITE);var o=au(this,vu).generateMessageId();au(this,vu).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===y.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(y.CLIPBOARD_WRITE,!0),au(r,vu).removeListener(e))})),au(this,vu).send({type:t.CLIPBOARD,action:y.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(lu);if(!r){r=this._createPromiseDecorator(lu);var n=au(this,vu).generateMessageId();au(this,vu).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===lu&&i.id===n){var a=i.text;e._resolvePromiseDecorator(lu,a),au(e,vu).removeListener(r)}})),au(this,vu).send({type:t.CLIPBOARD,action:lu,id:n,options:{}})}return r.promise}},{key:"leaderboardsSetScore",value:function(e,r){if(this.leaderboardsType===p)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={id:e,score:r};au(this,vu).send({type:t.LEADERBOARDS,action:y.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var r=this;if(this.leaderboardsType===p||this.leaderboardsType===h)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var o=au(this,vu).generateMessageId();au(this,vu).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.LEADERBOARDS&&i.action===y.LEADERBOARDS_GET_ENTRIES&&i.id===o?(r._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,i.entries),au(r,vu).removeListener(e)):r._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES)})),au(this,vu).send({type:t.LEADERBOARDS,action:y.LEADERBOARDS_GET_ENTRIES,id:o,options:{id:e}})}return n.promise}},{key:"unlockAchievement",value:function(e){var r=this;return this.isAchievementsSupported?new Promise((function(n){var o=au(r,vu).generateMessageId();au(r,vu).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===fu&&a.id===o&&(n(a.result),au(r,vu).removeListener(e))})),au(r,vu).send({type:t.ACHIEVEMENTS,action:fu,id:o,options:e})})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var r=this;return this.isGetAchievementsListSupported?new Promise((function(n){var o=au(r,vu).generateMessageId();au(r,vu).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===pu&&a.id===o&&(n(a.result),au(r,vu).removeListener(e))})),au(r,vu).send({type:t.ACHIEVEMENTS,action:pu,id:o,options:e})})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?(au(this,vu).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(e){return Ys({id:e.id},e.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?Ys({id:r.id},r.playgama):null}}])&&qs(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),m}(Kr);function bu(e){var t,r,n,o,i;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(mu);var a=e.config,s=void 0===a?{}:a;this._deviceType=null!==(t=s.deviceType)&&void 0!==t?t:eu(tu(zs.prototype),"deviceType",this),this._platformLanguage=null!==(r=s.platformLanguage)&&void 0!==r?r:eu(tu(zs.prototype),"platformLanguage",this),this._platformTld=null!==(n=s.platformTld)&&void 0!==n?n:eu(tu(zs.prototype),"platformTld",this),this._platformPayload=null!==(o=s.platformPayload)&&void 0!==o?o:eu(tu(zs.prototype),"platformPayload",this),this._leaderboardsType=null!==(i=s.leaderboardsType)&&void 0!==i?i:p,this._paymentsPurchases=e.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(y.INITIALIZE),au(this,vu).send({type:"liveness",action:"ping",options:{version:"1.26.0-preview.1"}})}function Pu(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return au(this,vu).send({type:t.PLATFORM,action:du,id:e,options:{resources:a}}),Promise.resolve(o)}zs=Su;const Eu=Su;function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}function Au(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ou(n.key),n)}}function Ou(e){var t=function(e,t){if("object"!=wu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wu(t)?t:String(t)}function ku(){return ku="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Du(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ku.apply(this,arguments)}function Iu(e,t){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iu(e,t)}function Du(e){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Du(e)}const Tu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Du(o);if(s){var r=Du(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){ve("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return ku(Du(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&Au(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Kr);function Ru(e){return Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(e)}function Lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ju(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Nu(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nu(n.key),n)}}function Nu(e){var t=function(e,t){if("object"!=Ru(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ru(t)?t:String(t)}function Bu(e,t){return Bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bu(e,t)}function Gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mu(e){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mu(e)}function Hu(e,t){xu(e,t),t.add(e)}function Fu(e,t,r){xu(e,t),t.set(e,r)}function xu(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Uu(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Wu(e,t,"set"),r),r}function Vu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function zu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Wu(e,t,"get"))}function Wu(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Zu=new WeakMap,Yu=new WeakMap,Ju=new WeakSet,Ku=new WeakSet,qu=new WeakSet;function Xu(){var e=this;return zu(this,Zu)?new Promise((function(t){zu(e,Zu).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!1).then((function(){return t()}));case"ready":e._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){e._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!1).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setInterstitialState(i.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!1)}function Qu(){var e=this;return zu(this,Zu)?new Promise((function(t){zu(e,Zu).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!0).then((function(){return t()}));case"ready":e._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){e._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){e._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!0).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setRewardedState(a.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!0)}function $u(e){e?(this._isPlayerAuthorized=!0,this._playerId=e.playerId,this._playerName=e.playerDisplayName,this._playerExtra=e,Uu(this,Yu,"personal"===e.userAccountType.toLowerCase())):this._playerApplyGuestData()}const ec=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bu(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mu(o);if(u){var r=Mu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ru(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gu(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hu(Gu(e=c.call.apply(c,[this].concat(r))),qu),Hu(Gu(e),Ku),Hu(Gu(e),Ju),Fu(Gu(e),Zu,{writable:!0,value:null}),Fu(Gu(e),Yu,{writable:!0,value:!1}),e}return r=l,(n=[{key:"platformId",get:function(){return e.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return zu(this,Yu)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);if(!t){var r;t=this._createPromiseDecorator(y.INITIALIZE),ye("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function(){return ve("$msstart")})).then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Vu(e,qu,$u).call(e,t)})).catch((function(){Vu(e,qu,$u).call(e,null)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&ye("https://playgama.com/ads/msn.v0.1.js").then((function(){return ve("pgAds")})).then((function(){window.pgAds.init(n).then((function(){Uu(e,Zu,window.pgAds);var t=e._options.gameId;zu(e,Zu).updateTargeting({gameId:t})}))}))}return t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Vu(e,qu,$u).call(e,r),t()})).catch((function(t){Vu(e,qu,$u).call(e,null),r(t)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;return new Promise((function(e,n){r._platformSdk.submitGameResultsAsync(t).then(e).catch(n)}))}},{key:"showBanner",value:function(e){var t,r=this;t="top"===e?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([t]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.loadAdsAsync(!1).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){return Vu(e,Ju,Xu).call(e)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.loadAdsAsync(!0).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){return Vu(e,Ku,Qu).call(e)}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:r.platformProductId}).then((function(r){if("IAP_PURCHASE_FAILURE"!==r.code){var n=ju(ju({id:e},r.receipt),{},{receiptSignature:r.receiptSignature});delete n.productId,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)}else t._rejectPromiseDecorator(y.PURCHASE,r.description)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].id}).then((function(n){if("IAP_CONSUME_FAILURE"!==n.code){t._paymentsPurchases.splice(r,1);var o=ju(ju({id:e},n.consumptionReceipt),{},{consumptionSignature:n.consumptionSignature});delete o.productId,t._resolvePromiseDecorator(y.CONSUME_PURCHASE,o)}else t._rejectPromiseDecorator(y.CONSUME_PURCHASE,n.description)})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=t.map((function(e){var t=r.find((function(t){return t.productId===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,publisherName:t.publisherName,inAppOfferToken:t.inAppOfferToken,isConsumable:t.isConsumable,price:"".concat(t.price.listPrice," ").concat(t.price.currencyCode," "),priceCurrencyCode:t.price.currencyCode,priceValue:t.price.listPrice}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)}else e._rejectPromiseDecorator(y.GET_CATALOG,r.description)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId}).then((function(t){if("IAP_GET_ALL_PURCHASES_FAILURE"!==t.code){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.receipts.map((function(e){var n=ju(ju({id:r.find((function(t){return t.id===e.productId})).id},e),{},{receiptSignature:t.receiptSignature});return delete n.productId,n})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)}else e._rejectPromiseDecorator(y.GET_PURCHASES,t.description)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}}])&&Cu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function tc(e){return tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(e)}function rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(r),!0).forEach((function(t){lc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fc(n.key),n)}}function ic(){return ic="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ic.apply(this,arguments)}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uc(e){return uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uc(e)}function cc(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function lc(e,t,r){return(t=fc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(e){var t=function(e,t){if("object"!=tc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tc(t)?t:String(t)}function pc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var dc=new WeakSet,hc=new WeakSet,yc=new WeakSet,mc=new WeakSet,vc=new WeakSet,_c=new WeakSet,gc=new WeakSet,Sc=new WeakSet,bc=new WeakSet,Pc=new WeakSet,Ec=new WeakSet,wc=new WeakSet,Ac=new WeakSet;function Oc(e,t){window.system&&window.system.postMessage(JSON.stringify({action:e,data:t}))}function kc(){if(window.system){var e=this;window.system.onmessage=function(t){try{var r=JSON.parse(t),n=r.action,o=r.data;n===y.INITIALIZE?pc(e,yc,Ic).call(e,o):n===y.AUTHORIZE_PLAYER?pc(e,mc,Dc).call(e,o):n===y.SET_INTERSTITIAL_STATE?pc(e,vc,Tc).call(e,o):n===y.SET_REWARDED_STATE?pc(e,_c,Rc).call(e,o):n===y.GET_CATALOG?pc(e,gc,Lc).call(e,o):n===y.PURCHASE?pc(e,Sc,jc).call(e,o):n===y.CONSUME_PURCHASE?pc(e,bc,Cc).call(e,o):n===y.GET_PURCHASES?pc(e,Pc,Nc).call(e,o):n===y.GET_STORAGE_DATA?pc(e,Ec,Bc).call(e,o):n===y.SET_STORAGE_DATA?pc(e,wc,Gc).call(e,o):n===y.DELETE_STORAGE_DATA&&pc(e,Ac,Mc).call(e,o)}catch(e){console.error("Error parsing Huawei message:",e)}}}}function Ic(e){e.success?(this._isInitialized=!0,this._resolvePromiseDecorator(y.INITIALIZE,e)):this._rejectPromiseDecorator(y.INITIALIZE,new Error(e))}function Dc(e){if(!e.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,new Error(e));this._playerId=e.playerId,this._playerName=e.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}function Tc(e){Object.values(i).includes(e.state)&&this._setInterstitialState(e.state,e.state===i.FAILED?new Error(e):void 0)}function Rc(e){Object.values(a).includes(e.state)&&this._setRewardedState(e.state,e.state===a.FAILED?new Error(e):void 0)}function Lc(e){if(e.success){var t=this._paymentsGetProductsPlatformData().map((function(t){var r=e.data.find((function(e){return e.productId===t.id}));return{id:t.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(y.GET_CATALOG,t)}else this._rejectPromiseDecorator(y.GET_CATALOG,new Error(e))}function jc(e){if(e.success){var t=e.data,r=nc({id:e.id},t);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(y.PURCHASE,r)}else this._rejectPromiseDecorator(y.PURCHASE,new Error(e))}function Cc(e){if(e.success){var t=this._paymentsPurchases.findIndex((function(t){return t.purchaseToken===e.purchaseToken}));t>=0&&this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(y.CONSUME_PURCHASE,e)}else this._rejectPromiseDecorator(y.CONSUME_PURCHASE,new Error(e))}function Nc(e){if(e.success){var t=this._paymentsGetProductsPlatformData();this._paymentsPurchases=e.data.map((function(e){var r=JSON.parse(e),n=nc({id:t.find((function(e){return e.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(y.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(y.GET_PURCHASES,new Error(e))}function Bc(e){e.success?this._resolvePromiseDecorator(y.GET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.GET_STORAGE_DATA,new Error(e))}function Gc(e){e.success?this._resolvePromiseDecorator(y.SET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.SET_STORAGE_DATA,new Error(e))}function Mc(e){e.success?this._resolvePromiseDecorator(y.DELETE_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.DELETE_STORAGE_DATA,new Error(e))}const Hc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uc(o);if(i){var r=uc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===tc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sc(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return cc(sc(e=a.call.apply(a,[this].concat(r))),Ac),cc(sc(e),wc),cc(sc(e),Ec),cc(sc(e),Pc),cc(sc(e),bc),cc(sc(e),Sc),cc(sc(e),gc),cc(sc(e),_c),cc(sc(e),vc),cc(sc(e),mc),cc(sc(e),yc),cc(sc(e),hc),cc(sc(e),dc),lc(sc(e),"_defaultStorageType",c.PLATFORM_INTERNAL),e}return r=s,(n=[{key:"platformId",get:function(){return e.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);return e||(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,pc(this,hc,kc).call(this),pc(this,dc,Oc).call(this,y.INITIALIZE,this._appId)):this._rejectPromiseDecorator(y.INITIALIZE,E)),e.promise}},{key:"authorizePlayer",value:function(){var e=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),pc(this,dc,Oc).call(this,y.AUTHORIZE_PLAYER)),e.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||ic(uc(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||ic(uc(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"setDataToStorage",value:function(e,t,r){if(r!==c.PLATFORM_INTERNAL)return ic(uc(s.prototype),"setDataToStorage",this).call(this,e,t,r);var n=this._getPromiseDecorator(y.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(y.SET_STORAGE_DATA),pc(this,dc,Oc).call(this,y.SET_STORAGE_DATA,{key:e,value:t})),n.promise}},{key:"getDataFromStorage",value:function(e,t){if(t!==c.PLATFORM_INTERNAL)return ic(uc(s.prototype),"getDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(y.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(y.GET_STORAGE_DATA),pc(this,dc,Oc).call(this,y.GET_STORAGE_DATA,e)),r.promise}},{key:"deleteDataFromStorage",value:function(e,t){if(t!==c.PLATFORM_INTERNAL)return ic(uc(s.prototype),"deleteDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(y.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(y.DELETE_STORAGE_DATA),pc(this,dc,Oc).call(this,y.DELETE_STORAGE_DATA,e)),r.promise}},{key:"showInterstitial",value:function(e){pc(this,dc,Oc).call(this,y.SHOW_INTERSTITIAL,e)}},{key:"showRewarded",value:function(e){pc(this,dc,Oc).call(this,y.SHOW_REWARDED,e)}},{key:"paymentsPurchase",value:function(e){if(!this._paymentsGetProductPlatformData(e))return Promise.reject();var t=this._getPromiseDecorator(y.PURCHASE);return t||(t=this._createPromiseDecorator(y.PURCHASE),pc(this,dc,Oc).call(this,y.PURCHASE,e)),t.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject();var r=this._getPromiseDecorator(y.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(y.CONSUME_PURCHASE),pc(this,dc,Oc).call(this,y.CONSUME_PURCHASE,this._paymentsPurchases[t].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=this._getPromiseDecorator(y.GET_CATALOG);return t||(t=this._createPromiseDecorator(y.GET_CATALOG),pc(this,dc,Oc).call(this,y.GET_CATALOG,e.map((function(e){return e.id})))),t.promise}},{key:"paymentsGetPurchases",value:function(){var e=this._getPromiseDecorator(y.GET_PURCHASES);return e||(e=this._createPromiseDecorator(y.GET_PURCHASES),pc(this,dc,Oc).call(this,y.GET_PURCHASES)),e.promise}}])&&oc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Kr);function Fc(e){return Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(e)}function xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Yc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vc(){Vc=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(R([])));P&&P!==r&&n.call(P,a)&&(S=P);var E=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Fc(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Fc(t)+" is not iterable")}return _.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function zc(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){zc(i,n,o,a,s,"next",e)}function s(e){zc(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Zc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yc(n.key),n)}}function Yc(e){var t=function(e,t){if("object"!=Fc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fc(t)?t:String(t)}function Jc(){return Jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Jc.apply(this,arguments)}function Kc(e,t){return Kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kc(e,t)}function qc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xc(e){return Xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xc(e)}var Qc=new WeakSet;function $c(){var e=this,t={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=t[r];n&&(e._setRewardedState(n),n===a.REWARDED&&e._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(t){var n=r[t];n&&e._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(t){var r=n[t];r&&e._setBannerState(r)}))}const el=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kc(e,t)}(l,t);var r,n,o,i,a,s,u=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xc(a);if(s){var r=Xc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Fc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qc(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=qc(e=u.call.apply(u,[this].concat(o))),r=Qc),r.add(t),e}return r=l,n=[{key:"platformId",get:function(){return e.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return d}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://app.bitquest.games/bqsdk.min.js").then((function(){ve("bq").then((function(){e._platformSdk=window.bq,e._platformSdk.initialize().then((function(){e._platformSdk.platform.sendMessage("game_ready");var t=e._platformSdk.player,r=t.id,n=void 0===r?null:r,o=t.name,i=void 0===o?"":o;e._playerId=n,e._playerName=i,e._isPlayerAuthorized=!0,e._defaultStorageType=c.PLATFORM_INTERNAL,e._playerExtra=t,function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Qc,$c).call(e),e.showPreRoll(),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Jc(Xc(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Jc(Xc(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===c.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return n._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return this._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return Jc(Xc(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=Wc(Vc().mark((function e(t,r,n){return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==c.PLATFORM_INTERNAL){e.next=12;break}if(!Array.isArray(t)){e.next=9;break}if(Array.isArray(r)){e.next=4;break}throw new Error("Value must be an array if key is an array");case 4:if(t.length===r.length){e.next=6;break}throw new Error("Key and value arrays must have the same length");case 6:return e.next=8,this._platformSdk.storage.set(t,r,"platform_internal");case 8:case 11:return e.abrupt("return");case 9:return e.next=11,this._platformSdk.storage.set(t,r,"platform_internal");case 12:return e.next=14,Jc(Xc(l.prototype),"setDataToStorage",this).call(this,t,r,n);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Wc(Vc().mark((function e(t,r){var n;return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==c.PLATFORM_INTERNAL){e.next=13;break}if(!Array.isArray(t)){e.next=10;break}n=0;case 3:if(!(n<t.length)){e.next=9;break}return e.next=6,this._platformSdk.storage.delete(t[n],"platform_internal");case 6:n++,e.next=3;break;case 9:return e.abrupt("return");case 10:return e.next=12,this._platformSdk.storage.delete(t,"platform_internal");case 12:return e.abrupt("return");case 13:return e.next=15,Jc(Xc(l.prototype),"deleteDataFromStorage",this).call(this,t,r);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._getPromiseDecorator(y.PURCHASE);return r||(r=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.payment.purchase(e).then((function(r){var n=Uc({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var e,t=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(e=this._platformSdk)||void 0===e||!e.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(y.GET_CATALOG);return n||(n=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(e){if(!Array.isArray(e))throw new Error("Catalog response is not an array");var n=r.map((function(t){var r=e.find((function(e){return e.purchaseId===t.id}));return r?{id:t.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);t._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(y.GET_CATALOG,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(e).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(t){var r=null==t?void 0:t.purchases,n=e._paymentsGetProductsPlatformData();e._paymentsPurchases=r.map((function(e){var t=n.find((function(t){return t.id===e.purchaseId}));if(!t)return null;var r=Uc({id:t.id},e);return delete r.purchaseId,r})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.leaderboard.setScore(e,o).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(e).then((function(e){var r=Array.isArray(e)?e:e.entries||e.data||[];t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,e)}))),r.promise}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.platform.getServerTime())}))}}],n&&Zc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function tl(e){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(e)}function rl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sl(n.key),n)}}function nl(e,t){return nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nl(e,t)}function ol(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function il(e){return il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},il(e)}function al(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function sl(e){var t=function(e,t){if("object"!=tl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tl(t)?t:String(t)}function ul(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var cl=new WeakSet,ll=new WeakSet,fl=new WeakSet;function pl(){var e=this;this._platformSdk.ads.on("rewarded:start",(function(){e._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(t){t||e._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)}))}function dl(){var e=this;this._platformSdk.ads.on("fullscreen:start",(function(){e._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){e._setInterstitialState(i.CLOSED)}))}function hl(){var e=this;this._platformSdk.ads.on("sticky:render",(function(){e._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){e._setBannerState(s.HIDDEN)}))}const yl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nl(e,t)}(u,t);var r,n,o,i,s=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=il(o);if(i){var r=il(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===tl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ol(e)}(this,e)});function u(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return al(ol(e=s.call.apply(s,[this].concat(o))),fl),al(ol(e),ll),al(ol(e),cl),t=ol(e),!0,(r=sl(r="_isBannerSupported"))in t?Object.defineProperty(t,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[r]=true,e}return r=u,(n=[{key:"platformId",get:function(){return e.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);ye(r).then((function(){ve("GamePush").then((function(){var t;e._platformSdk=window.GamePush;var r=null===(t=e._platformSdk)||void 0===t?void 0:t.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,u=void 0===s?"":s;e._isPlayerAuthorized=!0,e._playerId=o,e._playerName=a,u&&e._playerPhotos.push(u)}else e._playerApplyGuestData();e._isInitialized=!0,ul(e,ll,dl).call(e),ul(e,cl,pl).call(e),ul(e,fl,hl).call(e),e._resolvePromiseDecorator(y.INITIALIZE)}))}))}else this._rejectPromiseDecorator(y.INITIALIZE,w);return t.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.ads.showRewardedVideo().catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ads.isAdblockEnabled().then((function(e){t(e)}))}))}}])&&rl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Kr);function ml(e){return ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(e)}function vl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(r),!0).forEach((function(t){El(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wl(n.key),n)}}function Sl(e,t){return Sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sl(e,t)}function bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pl(e){return Pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pl(e)}function El(e,t,r){return(t=wl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wl(e){var t=function(e,t){if("object"!=ml(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ml(t)?t:String(t)}const Al=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sl(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pl(o);if(i){var r=Pl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ml(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bl(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return El(bl(e=a.call.apply(a,[this].concat(r))),"_appId",null),El(bl(e),"_accessToken",null),e}return r=s,(n=[{key:"platformId",get:function(){return e.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.appId?(this._appId=this._options.appId,ye("/cdn/discord/discord-v2.0.0.min.js").then((function(){ve("discord","DiscordSDK").then((function(){return e._platformSdk=new window.discord.DiscordSDK(e._appId),e._platformSdk.ready()})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))):this._rejectPromiseDecorator(y.INITIALIZE,O)),r.promise}},{key:"authorizePlayer",value:function(e){var t=this,r=(null==e?void 0:e.scope)||["identify"],n=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(e){var t=e.code;return fetch("".concat("/api","/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})})).then((function(e){return e.json()})).then((function(e){return t._accessToken=e.access_token,t._playerExtra={token:e.token,accessToken:t._accessToken,channelId:t._platformSdk.channelId},t._platformSdk.commands.authenticate({access_token:t._accessToken})})).then((function(e){if(null===e)throw t._playerApplyGuestData(),new Error("Authorization failed");return t._isPlayerAuthorized=!0,t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER),fetch("/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(t._accessToken),"Content-Type":"application/json"}})})).then((function(e){return e.json()})).then((function(e){t._playerId=e.id,t._playerName=e.username,e.avatar&&t._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(e.id,"/").concat(e.avatar,".png")),t._playerExtra=_l(_l({},t._playerExtra),e)})).catch((function(e){t._playerApplyGuestData(),t._accessToken=null,t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,e)}))),n.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=_l({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),fetch("/applications/".concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=t.map((function(e){var t,r,o=n.find((function(t){return t.id===e.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(t=o.price)||void 0===t||null===(t=t.currency)||void 0===t?void 0:t.toUpperCase(),s="".concat(i," ").concat(a);return{id:e.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));e._resolvePromiseDecorator(y.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.entitlements.map((function(e){return _l({id:r.find((function(t){return t.id===e.id})).id},e)})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=this._getPromiseDecorator(y.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(y.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){e._resolvePromiseDecorator(y.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(y.INVITE_FRIENDS,t)}))),t.promise}},{key:"share",value:function(e){var t=this;if(!e.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(y.SHARE);return r||(r=this._createPromiseDecorator(y.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:e.mediaUrl}).then((function(){t._resolvePromiseDecorator(y.SHARE)})).catch((function(e){t._rejectPromiseDecorator(y.SHARE,e)}))),r.promise}}])&&gl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Kr);function Ol(e){return Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(e)}function kl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Tl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tl(n.key),n)}}function Tl(e){var t=function(e,t){if("object"!=Ol(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ol(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ol(t)?t:String(t)}function Rl(){return Rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Rl.apply(this,arguments)}function Ll(e,t){return Ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ll(e,t)}function jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cl(e){return Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cl(e)}function Nl(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Bl(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ml(e,t,"set"),r),r}function Gl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ml(e,t,"get"))}function Ml(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Hl=new WeakMap,Fl=new WeakMap,xl=new WeakMap;const Ul=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ll(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cl(o);if(i){var r=Cl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jl(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Nl(jl(e=a.call.apply(a,[this].concat(r))),Hl,{writable:!0,value:void 0}),Nl(jl(e),Fl,{writable:!0,value:!0}),Nl(jl(e),xl,{writable:!0,value:!1}),e}return r=s,(n=[{key:"platformId",get:function(){return e.YOUTUBE}},{key:"platformLanguage",get:function(){return Gl(this,Hl)?Gl(this,Hl):Rl(Cl(s.prototype),"platformLanguage",this)}},{key:"isPlatformAudioEnabled",get:function(){return Gl(this,Fl)}},{key:"isPlatformPaused",get:function(){return Gl(this,xl)}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return h}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://www.youtube.com/game_api/v1").then((function(){ve("ytgame").then((function(){e._platformSdk=window.ytgame,e._defaultStorageType=c.PLATFORM_INTERNAL,Bl(e,Fl,e._platformSdk.system.isAudioEnabled());var t=e._platformSdk.system.getLanguage().then((function(t){Bl(e,Hl,t.length>2?t.slice(0,2):t)}));e._platformStorageCachedData={};var r=e._platformSdk.game.loadData().then((function(t){"string"==typeof t&&""!==t&&(e._platformStorageCachedData=JSON.parse(t))}));e._platformSdk.system.onAudioEnabledChange((function(t){Bl(e,Fl,t),e._setAudioState(t)})),e._platformSdk.system.onPause((function(){Bl(e,xl,!0),e._setPauseState(Gl(e,xl))})),e._platformSdk.system.onResume((function(){Bl(e,xl,!1),e._setPauseState(Gl(e,xl))})),Promise.all([t,r]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE),e._platformSdk.game.firstFrameReady()}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||Rl(Cl(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||Rl(Cl(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(e)){for(var i=[],a=0;a<e.length;a++){var s=void 0===n._platformStorageCachedData[e[a]]?null:n._platformStorageCachedData[e[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(e){}i.push(s)}t(i)}else{var u=void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e];if("string"==typeof u&&r)try{u=JSON.parse(u)}catch(e){}t(u)}})).catch((function(){o()}))})):Rl(Cl(s.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===c.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Il({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Rl(Cl(s.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===c.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Il({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))})):Rl(Cl(s.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Rl(Cl(s.prototype),"sendMessage",this).call(this,e)}},{key:"leaderboardsSetScore",value:function(e,t,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var i="string"==typeof t?parseInt(t,10):t;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){n._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return o.promise}}])&&Dl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Kr);function Vl(e){return Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(e)}var zl=["gamer_id","gamer_name","gamer_avatar_url"];function Wl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xl(n.key),n)}}function Zl(e,t){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zl(e,t)}function Yl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jl(e){return Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jl(e)}function Kl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ql(e,t,r){return(t=Xl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xl(e){var t=function(e,t){if("object"!=Vl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Vl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vl(t)?t:String(t)}function Ql(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var $l=new WeakSet,ef=new WeakSet;function tf(){var e=this,t=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;e._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(e){t._preloadInterstitialPromise=null,n(new Error(e))}})}))),this._preloadInterstitialPromise}function rf(){var e=this,t=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;e._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(e){t._preloadRewardedPromise=null,n(new Error(e))}})}))),this._preloadRewardedPromise}const nf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zl(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jl(o);if(u){var r=Jl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yl(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Kl(Yl(e=c.call.apply(c,[this].concat(r))),ef),Kl(Yl(e),$l),ql(Yl(e),"_preloadInterstitialPromise",null),ql(Yl(e),"_preloadRewardedPromise",null),ql(Yl(e),"_isBannerAvailable",!1),e}return r=l,(n=[{key:"platformId",get:function(){return e.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),window.onSdkReady=function(){if(e._platformSdk=window.JioGames,e._platformSdk.playerInfo){var t=e._platformSdk.playerInfo,r=t.gamer_id,n=t.gamer_name,o=t.gamer_avatar_url,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,zl);e.playerId=r||null,e.playerName=n||null,o&&e.playerPhotos.push(o),e.playerExtra=i,e._isPlayerAuthorized=!0}e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)},window.onBannerReady=function(){e._isBannerAvailable=!0},ye("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,JSON.stringify(t))}))),t.promise}},{key:"preloadInterstitial",value:function(){Ql(this,$l,tf).call(this)}},{key:"showInterstitial",value:function(){var e=this;Ql(this,$l,tf).call(this).then((function(){var t;e._platformSdk.showAd(null===(t=window.AdType)||void 0===t?void 0:t.Interstitial,{onAdClosed:function(){e._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(t){console.error(t),e._setInterstitialState(i.FAILED)}}),e._setInterstitialState(i.OPENED),e._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){Ql(this,ef,rf).call(this)}},{key:"showRewarded",value:function(){var e=this;Ql(this,ef,rf).call(this).then((function(){var t;e._platformSdk.showAd(null===(t=window.AdType)||void 0===t?void 0:t.Rewarded,{onAdClosed:function(t){t&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(t){console.error(t),e._setRewardedState(a.FAILED)}}),e._setRewardedState(a.OPENED),e._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(e){var t,r=this;this._isBannerAvailable?null===(t=window.JGBanner)||void 0===t||t.loadBanner().then((function(){var t,n;r._setBannerState(s.SHOWN),null===(t=window.JGBanner)||void 0===t||t.showBanner(e||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(e){console.error(e),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var e;null===(e=window.JGBanner)||void 0===e||e.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(e,t,r){if(!r)return Promise.reject();var n="string"==typeof t?parseInt(t,10):t;return this._platformSdk.postScore(n),Promise.resolve()}}])&&Wl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function of(e){return of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(e)}function af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?af(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=cf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):af(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cf(n.key),n)}}function cf(e){var t=function(e,t){if("object"!=of(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==of(t)?t:String(t)}function lf(){return lf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},lf.apply(this,arguments)}function ff(e,t){return ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ff(e,t)}function pf(e){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pf(e)}const df=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ff(e,t)}(l,t);var r,n,o,s,u=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pf(o);if(s){var r=pf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||lf(pf(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),ye("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){ve("PortalSDK").then((function(){e._platformSdk=window.PortalSDK,e._platformSdk.initialize().then((function(){e._platformSdk.initializeOverlay(),e._defaultStorageType=c.PLATFORM_INTERNAL,e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===c.PLATFORM_INTERNAL||lf(pf(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===c.PLATFORM_INTERNAL||lf(pf(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===c.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return Promise.resolve(n._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return lf(pf(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===c.PLATFORM_INTERNAL){if(Array.isArray(e)){if(!Array.isArray(t))return Promise.reject(new Error("Value must be an array if key is an array"));if(e.length!==t.length)return Promise.reject(new Error("Key and value arrays must have the same length"));var o=e.map((function(e,r){return Promise.resolve(n._platformSdk.setValue(e,t[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(e,t))}return lf(pf(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===c.PLATFORM_INTERNAL){if(Array.isArray(e)){var n=e.map((function(e){return Promise.resolve(r._platformSdk.removeValue(e))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(e))}return lf(pf(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.requestAd().then((function(){e._setInterstitialState(i.OPENED),e._setInterstitialState(i.CLOSED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.requestRewardAd().then((function(t){t?(e._setRewardedState(a.OPENED),e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):lf(pf(l.prototype),"sendMessage",this).call(this,e)}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e),n=this._getPromiseDecorator(y.PURCHASE);if(!n){n=this._createPromiseDecorator(y.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(e){var r=e.find((function(e){return e&&e.id===o}));if(!r)throw new Error("Shop item not found in catalog");return t._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=sf({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t||!Array.isArray(t)||0===t.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=t.map((function(e){var t=e.id,n=r.find((function(e){return e&&e.id===t}));return n?{id:e.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=e.id,n=r.find((function(e){return e.id===t}));return n?sf({id:n.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}}])&&uf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Kr);function hf(e){return hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(e)}function yf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=_f(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_f(n.key),n)}}function _f(e){var t=function(e,t){if("object"!=hf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=hf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hf(t)?t:String(t)}function gf(e,t){bf(e,t),t.add(e)}function Sf(e,t,r){bf(e,t),t.set(e,r)}function bf(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pf(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Af(e,t,"set"),r),r}function Ef(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function wf(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Af(e,t,"get"))}function Af(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Of=new WeakMap,kf=new WeakMap,If=new WeakMap,Df=new WeakMap,Tf=new WeakMap,Rf=new WeakSet,Lf=new WeakSet,jf=new WeakSet;function Cf(t){var r,n=e.MOCK,o=new URL(window.location.href);if(t.forciblySetPlatformId)n=Ef(this,Lf,Nf).call(this,t.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=Ef(this,Lf,Nf).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=e.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=e.PLAYDECK:o.hash.includes("tgWebAppData")?n=e.TELEGRAM:o.hostname.includes("y8")?n=e.Y8:o.hostname.includes("fbsbx")?n=e.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=e.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=e.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=e.BITQUEST:o.hostname.includes("eponesh.")?n=e.GAMEPUSH:o.hostname.includes("discordsays.com")?n=e.DISCORD:o.hostname.includes("usercontent.goog")?n=e.YOUTUBE:o.hostname.includes("portalapp.")&&(n=e.PORTAL)}var a=t;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=be(a,a.platforms[n])),delete a.platforms,n){case e.VK:Pf(this,If,new fn(a));break;case e.YANDEX:Pf(this,If,new jn(a));break;case e.CRAZY_GAMES:Pf(this,If,new mo(a));break;case e.ABSOLUTE_GAMES:Pf(this,If,new Io(a));break;case e.GAME_DISTRIBUTION:Pf(this,If,new Ho(a));break;case e.OK:Pf(this,If,new xi(a));break;case e.PLAYGAMA:Pf(this,If,new aa(a));break;case e.PLAYDECK:Pf(this,If,new Pa(a));break;case e.TELEGRAM:Pf(this,If,new Ha(a));break;case e.Y8:Pf(this,If,new os(a));break;case e.LAGGED:Pf(this,If,new fs(a));break;case e.FACEBOOK:Pf(this,If,new Fs(a));break;case e.POKI:Pf(this,If,new Tu(a));break;case e.QA_TOOL:Pf(this,If,new Eu(a));break;case e.MSN:Pf(this,If,new ec(a));break;case e.HUAWEI:Pf(this,If,new Hc(a));break;case e.BITQUEST:Pf(this,If,new el(a));break;case e.GAMEPUSH:Pf(this,If,new yl(a));break;case e.DISCORD:Pf(this,If,new Al(a));break;case e.YOUTUBE:Pf(this,If,new Ul(a));break;case e.JIO_GAMES:Pf(this,If,new nf(a));break;case e.PORTAL:Pf(this,If,new df(a));break;default:Pf(this,If,new Kr(a))}}function Nf(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function Bf(e){return wf(this,Of)||console.error(m),wf(this,Df)[e]}const Gf=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),gf(this,jf),gf(this,Lf),gf(this,Rf),Sf(this,Of,{writable:!0,value:!1}),Sf(this,kf,{writable:!0,value:null}),Sf(this,If,{writable:!0,value:null}),Sf(this,Df,{writable:!0,value:{}}),Sf(this,Tf,{writable:!0,value:"javascript"})}var u,p;return u=r,(p=[{key:"version",get:function(){return"1.26.0-preview.1"}},{key:"isInitialized",get:function(){return wf(this,Of)}},{key:"options",get:function(){return wf(this,If).options}},{key:"platform",get:function(){return Ef(this,jf,Bf).call(this,t.PLATFORM)}},{key:"player",get:function(){return Ef(this,jf,Bf).call(this,t.PLAYER)}},{key:"game",get:function(){return Ef(this,jf,Bf).call(this,t.GAME)}},{key:"storage",get:function(){return Ef(this,jf,Bf).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return Ef(this,jf,Bf).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return Ef(this,jf,Bf).call(this,t.SOCIAL)}},{key:"device",get:function(){return Ef(this,jf,Bf).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return Ef(this,jf,Bf).call(this,t.LEADERBOARDS)}},{key:"leaderboards",get:function(){return Ef(this,jf,Bf).call(this,t.LEADERBOARDS)}},{key:"payments",get:function(){return Ef(this,jf,Bf).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return Ef(this,jf,Bf).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return Ef(this,jf,Bf).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return Ef(this,jf,Bf).call(this,t.CLIPBOARD)}},{key:"engine",get:function(){return wf(this,Tf)},set:function(e){Pf(this,Tf,e)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return f}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return c}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"initialize",value:function(e){var r=this;if(wf(this,Of))return Promise.resolve();if(!wf(this,kf)){Pf(this,kf,new G);var n,o="./playgama-bridge-config.json";e&&e.configFilePath&&(o=e.configFilePath),fetch(o).then((function(e){return e.json()})).then((function(e){n=mf({},e)})).catch((function(t){console.error("Config parsing error.",t),n=mf({},e)})).finally((function(){Ef(r,Rf,Cf).call(r,n),wf(r,If).engine=r.engine,wf(r,Df)[t.PLATFORM]=new oe(wf(r,If)),wf(r,Df)[t.PLAYER]=new le(wf(r,If)),wf(r,Df)[t.GAME]=new Te(wf(r,If)),wf(r,Df)[t.STORAGE]=new Be(wf(r,If)),wf(r,Df)[t.ADVERTISEMENT]=new zt(wf(r,If)),wf(r,Df)[t.SOCIAL]=new qt(wf(r,If)),wf(r,Df)[t.DEVICE]=new rr(wf(r,If)),wf(r,Df)[t.LEADERBOARDS]=new yr(wf(r,If)),wf(r,Df)[t.PAYMENTS]=new br(wf(r,If)),wf(r,Df)[t.REMOTE_CONFIG]=new kr(wf(r,If)),wf(r,Df)[t.CLIPBOARD]=new jr(wf(r,If)),wf(r,Df)[t.ACHIEVEMENTS]=new Hr(wf(r,If)),wf(r,If).initialize().then((function(){var e,n;if(Pf(r,Of,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white"),wf(r,kf)&&(wf(r,kf).resolve(),Pf(r,kf,null)),null!==(e=wf(r,If).options)&&void 0!==e&&null!==(e=e.advertisement)&&void 0!==e&&null!==(e=e.interstitial)&&void 0!==e&&e.preloadOnStart){var o=wf(r,If).options.advertisement.interstitial.preloadOnStart;wf(r,Df)[t.ADVERTISEMENT].preloadInterstitial(o)}if(null!==(n=wf(r,If).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var i=wf(r,If).options.advertisement.rewarded.preloadOnStart;wf(r,Df)[t.ADVERTISEMENT].preloadRewarded(i)}})).finally((function(){setTimeout((function(){return wf(r,Df)[t.GAME].setLoadingProgress(100,!0)}),700)}))}))}return wf(this,kf).promise}}])&&vf(u.prototype,p),Object.defineProperty(u,"prototype",{writable:!1}),r}();window.bridge=new Gf,window.playgamaBridge=window.bridge})()})();
